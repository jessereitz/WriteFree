!function(){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(null==e||"object"!==r(e))return!1;var n="";return Object.keys(e).forEach(function(t){n+="".concat(t,": ").concat(e[t],";")}),t.setAttribute("style",n),t}function c(e,t){return t&&(Array.isArray(t)?t.forEach(function(t){return e.classList.add(t)}):e.classList.add(t)),e}function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=document.createElement(t);return c(i,e),n&&"object"===r(n)&&Object.keys(n).forEach(function(t){return"style"===t?a(i,n[t]):"klasses"===t?c(i,n[t]):i.setAttribute(t,n[t]),null}),i}function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Button",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=l("button",e,3<arguments.length&&void 0!==arguments[3]?arguments[3]:{});return n?i.innerHTML=t:i.textContent=t,i}function o(t){return"Backspace"===t.key||t.ctrlKey&&"Backspace"===t.key||t.shiftKey&&"Backspace"===t.key||t.altKey&&"Backspace"===t.key||t.metaKey&&"Backspace"===t.key||"Delete"===t.key||t.ctrlKey&&"Delete"===t.key||t.shiftKey&&"Delete"===t.key||t.altKey&&"Delete"===t.key||t.metaKey&&"Delete"===t.key||t.ctrlKey&&"x"===t.key.toLowerCase()||t.shiftKey&&"x"===t.key.toLowerCase()||t.altKey&&"x"===t.key.toLowerCase()||t.metaKey&&"x"===t.key.toLowerCase()}function h(t){return!!t.includes(".")&&(t.startsWith("http://")||t.startsWith("https://")?t:"http://".concat(t))}function d(t){for(var e=["DIV","P","H1","H2"],n=t;!e.includes(n.tagName);)n=n.parentNode;return n}function u(t,n){if(t.nodeName===n)return t;if(t.parentNode.nodeName===n)return t.parentNode;var i=!1;return t.children&&Array.from(t.children).forEach(function(t){var e=u(t,n);return!!e&&(i=e)}),i}function n(t,e){return t instanceof Selection&&(e.contains(t.anchorNode)&&e.contains(t.focusNode)||t.containsNode(e,!0))}function p(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e.collapse(n),t.removeAllRanges(),t.addRange(e)}var t,f=((t={main:"wf__toolbar"}).btn="".concat(t.main,"__btn"),t.btnDisabled="".concat(t.btn,"-disabled"),t.btnActive="".concat(t.btn,"-active"),t.btnCtn="".concat(t.btn,"-ctn"),t.input="".concat(t.main,"__input"),t.inputCtn="".concat(t.input,"-ctn"),t.hideUp="".concat(t.main,"-hide-up"),t.hideDown="".concat(t.main,"-hide-down"),t.wide="".concat(t.main,"-wide"),t),i={init:function(t,e){this.$ctn=l("div",[f.inputCtn,f.hideDown]),this.$input=l("input",f.input,{type:"text"}),this.$closeBtn=s("<b>&times;</b>",f.btn,!0),this.$ctn.appendChild(this.$input),this.$ctn.appendChild(this.$closeBtn),this.$closeBtn.addEventListener("click",this.hide.bind(this)),this.$input.addEventListener("keypress",this.defaultEnterHandler.bind(this)),this.hideCallback=t,e&&e instanceof HTMLElement&&this.appendTo(e)},defaultEnterHandler:function(t){"Enter"===t.key&&(this.saveHandler&&"function"==typeof this.saveHandler&&this.saveHandler.call(this,this.$input.value,this.currentRange),this.preventHideOnEnter||this.hide())},setSaveHandler:function(t){t&&"function"==typeof t&&(this.saveHandler=t)},clearSaveHandler:function(){this.saveHandler=null},getValue:function(){return this.$input.value},display:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this.$input.placeholder=t,this.$ctn.classList.remove(f.hideDown);var e=window.getSelection();this.currentRange=e.getRangeAt(0),document.createRange().selectNode(this.$input),setTimeout(function(){this.$input.focus()}.bind(this),200)},clear:function(t){this.$input.value="",t&&(this.$input.placeholder=t)},hide:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this.$ctn.classList.contains(f.hideDown))return!1;if(this.$ctn.classList.add(f.hideDown),this.$input.value="",this.clearSaveHandler(),this.currentRange){var e=window.getSelection(),n=e.getRangeAt(0);e.removeRange(n),e.addRange(this.currentRange)}return t&&this.hideCallback&&"function"==typeof this.hideCallback&&this.hideCallback(),!0},html:function(){return this.$ctn},getWidth:function(){return this.$ctn.getBoundingClientRect().width},getHeight:function(){return this.$ctn.getBoundingClientRect().height},appendTo:function(t){return t.appendChild(this.html()),t}},e={initToolbar:function(t,e){return this.options=e,this.editor=t,this.toolbarOffset=5,this.$ctn=l("div",[f.main,"hide"],{contenteditable:!1}),this.$btnCtn=l("div",f.btnCtn),this.$ctn.appendChild(this.$btnCtn),this.input=Object.create(i),this.editor.$ctn.appendChild(this.$ctn),this},getButtonsWidth:function(){var t=this.$btnCtn.children;return t[0].getBoundingClientRect().width*(1.1*t.length)},getButtonsHeight:function(){return 1.25*this.$btnCtn.firstChild.getBoundingClientRect().height},hideButtons:function(){this.$ctn.style.width="".concat(this.input.getWidth(),"px"),this.$ctn.style.height="".concat(this.input.getHeight(),"px"),this.$btnCtn.classList.add(f.hideUp)},displayButtons:function(){this.$btnCtn.classList.remove(f.hideUp),this.$ctn.style.width="".concat(this.getButtonsWidth(),"px"),this.$ctn.style.height="".concat(this.getButtonsHeight(),"px")},displayInput:function(t){var e=window.getSelection();this.currentRange=e.getRangeAt(0),this.input.display(t)},hideInput:function(){},positionToolbar:function(){var t=window.getSelection();this.currentRange=t.getRangeAt(0);var e=null;e=this.currentRange.collapsed?this.currentRange.commonAncestorContainer.getBoundingClientRect():this.currentRange.getBoundingClientRect();var n=this.$ctn.getBoundingClientRect();e.bottom+this.toolbarOffset+n.height>=window.innerHeight?this.$ctn.style.top="".concat(e.top-(this.toolbarOffset+n.height),"px"):this.$ctn.style.top="".concat(e.bottom+this.toolbarOffset,"px"),this.$ctn.style.left="".concat(e.left,"px")},baseDisplay:function(){return this.input.hide(!1),this.$ctn.classList.remove("hide"),this.positionToolbar(),this.displayButtons(),!0},hide:function(){return this.currentRange=null,this.input.hide(!1),this.displayButtons(),this.$ctn.classList.add("hide"),!!this.$ctn.classList.contains("hide")},html:function(){return this.$ctn},contains:function(t){return this.$ctn.contains(t)}},g={init:function(t,e,n,i){return this.$html=s(t,f.btn,!0,{title:e}),this.setSaveHandler(n),this.appendTo(i),this},setSaveHandler:function(t){return"function"!=typeof t?null:(this.clickHandler&&this.$html.removeEventListener("click",this.clickHandler),this.saveHandler=t,this.$html.addEventListener("click",this.saveHandler),this.saveHandler)},addClass:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(t)?t.forEach(function(t){e.$html.classList.add(t)}):this.$html.classList.add(t)},removeClass:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(t)?t.forEach(function(t){e.$html.classList.remove(t)}):this.$html.classList.remove(t)},disable:function(){this.$html.disabled=!0,this.addClass(f.btnDisabled)},enable:function(){this.$html.disabled=!1,this.removeClass(f.btnDisabled)},markActive:function(){this.$html.classList.add(f.btnActive)},markInactive:function(){this.$html.classList.remove(f.btnActive)},html:function(){return this.$html},appendTo:function(t){t&&t instanceof HTMLElement&&t.appendChild(this.html())}},v=Object.create(e);v.init=function(t,e){return this.initToolbar(t,e),this.input.init(this.displayButtons.bind(this),this.$ctn),this.createToolbarBtns(),this},v.createToolbarBtns=function(){this.boldBtn=Object.create(g),this.boldBtn.init("<b>B</b>","Bold Selection",this.editor.boldSelection.bind(this.editor),this.$btnCtn),this.italicBtn=Object.create(g),this.italicBtn.init("<i>i</i>","Italicize Selection",this.editor.italicizeSelection.bind(this.editor),this.$btnCtn),this.headingBtn=Object.create(g),this.headingBtn.init("H","Wrap Selection with Heading",this.editor.wrapHeading.bind(this.editor),this.$btnCtn),this.linkBtn=Object.create(g),this.linkBtn.init("ðŸ”—","Wrap Selection with Link",this.linkBtnHandler.bind(this),this.$btnCtn)},v.toggleDisabledButtons=function(){u(this.currentRange.commonAncestorContainer,"H1")||u(this.currentRange.commonAncestorContainer,"H2")?(this.linkBtn.disable(),this.boldBtn.disable(),this.italicBtn.disable()):(this.linkBtn.enable(),this.boldBtn.enable(),this.italicBtn.enable())},v.toggleActiveLink=function(t){var e=u(t.getRangeAt(0).commonAncestorContainer,"A");e&&t.containsNode(e,!0)?(this.linkBtn.markActive(),this.linkBtn.currentLink=e):(this.linkBtn.currentLink=null,this.linkBtn.markInactive())},v.linkBtnHandler=function(){this.linkBtn.currentLink?(this.editor.removeLink(this.linkBtn.currentLink),this.linkBtn.currentLink=null,this.linkBtn.markInactive()):(this.input.setSaveHandler(this.editor.wrapLink),this.hideButtons(),this.input.display("Type a link..."))},v.display=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return t instanceof Selection&&(!n(t,this.$ctn)&&(this.currentRange=t.getRangeAt(0),this.toggleActiveLink(t),this.toggleDisabledButtons(),this.baseDisplay()))};var b=Object.create(e);b.init=function(t,e){return this.initToolbar(t,e),this.toolbarOffset=15,this.createToolbarBtns(),this.input.init(this.hideImageInput.bind(this),this.$ctn),this.input.$input.id="input",this},b.createToolbarBtns=function(){this.imgBtn=Object.create(g),this.imgBtn.init("ðŸ–¼ï¸","Insert an Image",this.displayImgInput.bind(this),this.$btnCtn),this.lineBtn=Object.create(g),this.lineBtn.init("--","Insert a Horizontal Rule",this.editor.insertLine.bind(this.editor),this.$btnCtn)},b.toggleDisabledButtons=function(){var t=window.getSelection();this.editor.isFirst(t.anchorNode)?this.lineBtn.disable():this.lineBtn.enable()},b.displayImgInput=function(){var t=window.getSelection();this.currentRange=t.getRangeAt(0),this.input.setSaveHandler(this.insertImage.bind(this)),this.input.preventHideOnEnter=!0,this.hideButtons(),this.input.display("Type an image URL...")},b.hideImageInput=function(){this.imgURL=null,this.displayButtons()},b.insertImage=function(){this.imgURL?(this.editor.insertImage(this.imgURL,this.input.getValue(),this.currentRange.startContainer),this.input.hide(),this.displayButtons(),this.hide()):(this.imgURL=h(this.input.getValue()),this.input.clear("Enter alt text..."))},b.display=function(){return this.toggleDisabledButtons(),this.baseDisplay()};var m={initWFEditor:function(t,e){return this.$ctn=t,this.options=e,this.generateClasses(),document.execCommand("defaultParagraphSeparator",!1,this.options.divOrPar),this.$innerCtn=l("div",this.classes.main,{style:this.options.containerStyle}),this.$innerCtn.setAttribute("contenteditable",!0),this.$ctn.append(this.$innerCtn),this.createFirstTextSection(),this.editToolbar=v.init(this,this.options),this.insertToolbar=b.init(this,this.options),this.$ctn.addEventListener("paste",this.pasteHandler.bind(this)),this.$ctn.addEventListener("keydown",this.keydownHandler.bind(this)),this.$ctn.addEventListener("keyup",this.keyupHandler.bind(this)),this.$ctn.addEventListener("click",this.checkForInsert.bind(this)),this.$ctn.addEventListener("mouseup",this.positionCursor.bind(this)),document.addEventListener("selectionchange",this.selectionHandler.bind(this)),this},generateClasses:function(){return this.classes={},this.classes.main=["wf__editor"],"wf__edtior"!==this.options.containerClass&&this.classes.main.push(this.options.containerClass),this.classes.textSection="wf__text-section",this.classes.containerSection="wf__container-section",this.classes},createFirstTextSection:function(){this.$firstSection||(this.$firstSection=this.createTextSection()),this.$firstSection.textContent="",this.$innerCtn.insertBefore(this.$firstSection,this.$innerCtn.firstChild);var t=window.getSelection(),e=document.createRange();return e.setStart(this.$firstSection,0),e.setEnd(this.$firstSection,0),t.removeAllRanges(),t.addRange(e),window.first=this.$firstSection,this.$firstSection},displayFirstSectionPlaceholder:function(){var t=window.getSelection();t.isCollapsed&&this.isFirst(t.anchorNode)&&t.anchorNode.classList.contains(this.classes.textSection)&&""===t.anchorNode.textContent&&(t.anchorNode.innerHTML="")},createTextSection:function(){Array.isArray(this.options.sectionClass)||(this.options.sectionClass=Array(this.options.sectionClass)),this.options.sectionClass.includes(this.classes.textSection)||this.options.sectionClass.push(this.classes.textSection);var t={style:this.options.sectionStyle,klasses:this.options.sectionClass};return l(this.options.divOrPar,[],t)},createContainerSection:function(t){var e=l("div",this.classes.containerSection);return t&&t instanceof Element&&e.appendChild(t),e},normalizeSection:function(){var t=window.getSelection();try{var e=t.getRangeAt(0),n=d(t.anchorNode),i=d(t.focusNode);n&&n.normalize(),i&&i.normalize(),e.commonAncestorContainer&&e.commonAncestorContainer.normalize()}catch(t){return null}return null},deleteContainerSection:function(t){var e=d(window.getSelection().anchorNode),n=null;return"Backspace"===t.key?n=e.previousSibling:"Delete"===t.key&&(n=e.nextSibling),n&&n.classList.contains(this.classes.containerSection)&&(t.preventDefault(),e.parentNode.removeChild(n)),!1},preventTextInContainer:function(t){var e=window.getSelection(),n=d(e.anchorNode);if(n.classList.contains(this.classes.containerSection)){var i=n.nextSibling;"ArrowUp"===t.key||"ArrowLeft"===t.key?i=n.previousSibling:"ArrowDown"===t.key||"ArrowRight"===t.key?i=n.nextSibling:(!i||i.classList.contains(this.classes.containerSection)||i.classList.contains(this.classes.textSection)&&0<i.textContent.length)&&(i=this.createTextSection(),this.$innerCtn.insertBefore(i,n.nextSibling)),t.preventDefault(),e.collapse(i,0)}},boldSelection:function(){window.getSelection()instanceof Selection&&document.execCommand("bold",!1)},italicizeSelection:function(){window.getSelection()instanceof Selection&&document.execCommand("italic",!1)},wrapHeading:function(){var t,e,n,i=window.getSelection(),s=d(i.anchorNode);if(s.innerHTML=s.innerHTML.replace(/<[^>]+>/g,""),i instanceof Selection){n="H1"===s.tagName?(t=this.options.divOrPar,e=this.options.sectionClass,this.options.sectionStyle):"DIV"===s.tagName?(t="h2",e=this.options.smallHeadingClass,this.options.smallHeadingClass):(t="h1",e=this.options.largeHeadingClass,this.options.largeHeadingStyle);var o=document.execCommand("formatBlock",!1,t);if(o){a(s=d(i.anchorNode),n),c(s,e);var r=i.getRangeAt(0);r.selectNode(i.focusNode),r.collapse()}return o}return!1},wrapLink:function(t,e){var n=h(t);if(!n)return!1;var i=l("a");return i.href=n,e.surroundContents(i),p(window.getSelection(),e),i},removeLink:function(t){var e=window.getSelection();this.currentRange=e.getRangeAt(0);var n=document.createRange();n.selectNode(t);var i=document.createTextNode(t.textContent);n.deleteContents(),n.insertNode(i),p(e,n)},insertImage:function(t,e,n){var i=window.getSelection(),s=l("img",this.options.imgClass,{src:t,alt:e,style:this.options.imgStyle}),o=this.createContainerSection();s.section=o,s.onerror=function(){s.section.parentNode.removeChild(s.section),alert("Image failed to load.")},n===this.$firstSection&&(this.$firstSection=o),o.appendChild(s),n.parentNode.insertBefore(o,n);var r=document.createRange();r.selectNodeContents(n),p(i,r,!0)},insertLine:function(){var t=window.getSelection(),e=t.getRangeAt(0),n=d(e.startContainer);if(n===this.$firstSection)return!1;var i=document.createElement("hr"),s=this.createContainerSection();return s.appendChild(i),n.parentNode.insertBefore(s,n),(e=document.createRange()).selectNodeContents(n),p(t,e,!0),this.insertToolbar.hide(),!0},selectionHandler:function(t){if("selectionchange"!==t.type)return!1;var e=window.getSelection();return n(e,this.$ctn)&&!e.isCollapsed||n(e,this.editToolbar.html())?this.editToolbar.display(e):this.editToolbar.hide(),!0},pasteHandler:function(t){if(t.preventDefault(),"paste"===!t.type)return!1;var e=t.clipboardData.getData("text/plain");return document.execCommand("insertHTML",!1,e),!0},newLineHandler:function(t){t.preventDefault();var e=window.getSelection(),n=d(e.focusNode),i=this.createTextSection();n.parentNode.insertBefore(i,n.nextSibling);var s=e.getRangeAt(0);if(s.collapsed)try{s.setEndBefore(n.nextSibling),0!==s.toString().length&&i.append(s.cloneContents())}catch(t){i.textContent=""}0===i.textContent.length&&i.append(document.createTextNode("")),s.deleteContents(),e.collapse(i,0),i.normalize();var o=i.getBoundingClientRect();return o.top>=window.innerHeight&&window.scroll({top:o.top+window.scrollY,behavior:"instant"}),i},keydownHandler:function(t){var e=window.getSelection();o(t)&&("Backspace"===t.key&&0===e.anchorOffset&&e.focusOffset===e.focusNode.textContent.length&&e.anchorNode===e.focusNode?this.deleteContainerSection(t):"Delete"===t.key&&e.anchorOffset===e.anchorNode.textContent.length&&e.focusOffset===e.focusNode.textContent.length&&e.anchorNode===e.focusNode&&this.deleteContainerSection(t)),"Enter"===t.key&&this.$innerCtn.contains(t.target)&&this.newLineHandler(t),this.preventTextInContainer(t);var n=e.getRangeAt(0),i=d(n.startContainer);this.editToolbar.contains(i)||this.insertToolbar.contains(i)||(this.prevSection=i,this.prevSectionPrevSibling=this.prevSection.previousSibling,this.prevOffset=n.startOffset)},keyupHandler:function(t){if(o(t)){var e=window.getSelection();""!==this.$innerCtn.innerHTML&&"<br>"!==this.$innerCtn.innerHTML&&e.anchorNode!==this.$innerCtn||this.createFirstTextSection(),this.displayFirstSectionPlaceholder()}try{this.normalizeSection(),this.checkForInsert(t),this.positionCursor()}catch(t){return null}return!0},checkForInsert:function(t){if(t&&this.insertToolbar.$ctn.contains(t.target))return!1;var e=window.getSelection();return this.insertToolbar.hide(),!(!e.isCollapsed||!e.anchorNode||""!==e.anchorNode.textContent||n(e,this.insertToolbar.$ctn))&&(this.insertToolbar.display(),!0)},positionCursor:function(){var t=window.getSelection(),e=null;try{e=d(t.anchorNode)}catch(t){return!1}if(this.editToolbar.contains(e)||this.insertToolbar.contains(e))return!1;var n=t.getRangeAt(0);if(!e.classList.contains(this.classes.textSection))if(this.prevSection&&this.$innerCtn.contains(this.prevSection)&&this.prevSection.classList.contains(this.classes.textSection))t.collapse(this.prevSection,this.prevOffset);else{if(!(e=this.prevSectionPrevSibling))return!1;var i=this.createTextSection();e.nextSibling?this.$innerCtn.insertBefore(i,e.nextSibling):this.$innerCtn.appendChild(i),n.selectNodeContents(i),n.collapse(!0)}return!0},html:function(){return this.$innerCtn},getToolbar:function(){return this.editToolbar},isFirst:function(t){return this.$innerCtn.children[0]===t}};window.wf=function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i={divOrPar:"p",sectionClass:null,sectionStyle:null,containerClass:"wf__editor",containerStyle:null,largeHeadingClass:null,largeHeadingStyle:null,smallHeadingClass:null,smallHeadingStyle:null,imgClass:null,imgStyle:null},s=(e=Object.create(i),n&&"object"===r(n)&&Object.keys(n).forEach(function(t){e[t]=n[t]}),e),o=Object.create(m);return o.initWFEditor(t,s),{html:o.html.bind(o)}}(document.getElementById("WriteFreeCtn"),{divOrPar:"div",sectionClass:"testSection",sectionStyle:{},containerClass:"testContainer",containerStyle:{},imgStyle:{}})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGVmcmVlLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3dyaXRlRnJlZUxpYi5qcyIsIi4uLy4uL3NyYy90Yl9jb21wb25lbnRzL3RiQ2xhc3Nlcy5qcyIsIi4uLy4uL3NyYy90Yl9jb21wb25lbnRzL3RiSW5wdXQuanMiLCIuLi8uLi9zcmMvdGJfY29tcG9uZW50cy9iYXNlVG9vbGJhci5qcyIsIi4uLy4uL3NyYy90Yl9jb21wb25lbnRzL3RiQnV0dG9uLmpzIiwiLi4vLi4vc3JjL2VkaXRUb29sYmFyLmpzIiwiLi4vLi4vc3JjL2luc2VydFRvb2xiYXIuanMiLCIuLi8uLi9zcmMvRWRpdG9yLmpzIiwiLi4vLi4vc3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBhZGRTdHlsZUZyb21PYmogLSBBZGRzIGlubGluZS1zdHlsZSB0byBhIGdpdmVuIEhUTUwgRWxlbWVudCBmcm9tIHRoZSBnaXZlblxuICogIHN0eWxlIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9ICRlbCAgIFRoZSBIVE1MIEVsZW1lbnQgdG8gd2hpY2ggdGhlIHN0eWxlcyB3aWxsIGJlIGFkZGVkLlxuICogQHBhcmFtIHtvYmplY3R9IHN0eWxlT2JqIFRoZSBvYmplY3Qgd2hpY2ggY29udGFpbnMgdGhlIHN0eWxlcy4gTXVzdCBiZVxuICogIGZvcm1hdHRlZCBpbiB0aGUgZm9ybWF0IHsgJ3Byb3BlcnR5JyA6ICd2YWx1ZScgfSB3aGVyZSAncHJvcGVydHknIGlzIHRoZVxuICogIENTUyBwcm9wZXJ0eSBhbmQgJ3ZhbHVlJyBpcyB0aGUgdmFsdWUgdG8gd2hpY2ggaXQgc2hvdWxkIGJlIHNldC5cbiAqICBFLmcuIHsgY29sb3IgOiAncHVycGxlJyB9IHdpbGwgc2V0ICRlbCdzIGNvbG9yIHRvIHB1cnBsZS5cbiAqXG4gKiBAcmV0dXJucyB7RWxlbWVudH0gSWYgdGhlIGdpdmVuIHN0eWxlT2JqIGlzIG5vdCBhbiBvYmplY3Qgb3IgaXMgbnVsbCBvclxuICogIHVuZGVmaW5lZCwgd2lsbCByZXR1cm4gZmFsc2UuIElmIHN0eWxlcyBhcmUgc3VjY2Vzc2Z1bGx5IGFkZGVkLCByZXR1cm5zIHRoZVxuICogIEhUTUwgRWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0eWxlRnJvbU9iaigkZWwsIHN0eWxlT2JqKSB7XG4gIGlmIChcbiAgICBzdHlsZU9iaiA9PT0gbnVsbFxuICAgIHx8IHN0eWxlT2JqID09PSB1bmRlZmluZWRcbiAgICB8fCAoISh0eXBlb2Ygc3R5bGVPYmogPT09ICdvYmplY3QnKSlcbiAgKSB7IHJldHVybiBmYWxzZTsgfVxuICBsZXQgc3R5bGVTdHJpbmcgPSAnJztcbiAgT2JqZWN0LmtleXMoc3R5bGVPYmopLmZvckVhY2goKHByb3ApID0+IHtcbiAgICBzdHlsZVN0cmluZyArPSBgJHtwcm9wfTogJHtzdHlsZU9ialtwcm9wXX07YDtcbiAgfSk7XG4gICRlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVTdHJpbmcpO1xuICByZXR1cm4gJGVsO1xufVxuXG4vKipcbiAqIGFkZENsYXNzZXMgLSBBZGQgY2xhc3NlcyB0byBhbiBIVE1MIEVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSAkZWwgIFRoZSBIVE1MIEVsZW1lbnQgdG8gd2hpY2ggdGhlIGNsYXNzZXMgd2lsbCBiZSBhZGRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nIHx8IEFycmF5fSBrbGFzc2VzIEEgc2luZ2xlIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzXG4gKiAgcmVwcmVzZW50aW5nIHRoZSBjbGFzc2VzIHRvIGJlIGFkZGVkIHRvICRlbC5cbiAqXG4gKiBAcmV0dXJucyB7RWxlbWVudH0gVGhlIG9yaWdpbmFsICRlbCB3aXRoIGNsYXNzZXMgYXR0YWNoZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDbGFzc2VzKCRlbCwga2xhc3Nlcykge1xuICBpZiAoIWtsYXNzZXMpIHJldHVybiAkZWw7XG4gIGlmIChBcnJheS5pc0FycmF5KGtsYXNzZXMpKSB7XG4gICAga2xhc3Nlcy5mb3JFYWNoKGtsYXNzID0+ICRlbC5jbGFzc0xpc3QuYWRkKGtsYXNzKSk7XG4gIH0gZWxzZSB7XG4gICAgJGVsLmNsYXNzTGlzdC5hZGQoa2xhc3Nlcyk7XG4gIH1cbiAgcmV0dXJuICRlbDtcbn1cblxuLyoqXG4gKiBnZW5lcmF0ZUVsZW1lbnQgLSBRdWlja2x5IGdlbmVyYXRlcyBhbiBIVE1MIGVsZW1lbnQgd2l0aCBnaXZlbiB0YWdOYW1lLFxuICogIGNsYXNzZXMsIGFuZCBpZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW3RhZ05hbWU9ZGl2XSBUaGUgdGFnIG5hbWUgdG8gdXNlIGZvciB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSAgW2tsYXNzZXM9W11dICBBIHNpbmdsZSBzdHJpbmcgb3IgYW4gYXJyYXkgb2ZcbiAqICBzdHJpbmdzIHJlcHJlc2VudGluZyB0aGUgY2xhc3NlcyB0byBiZSBhZGRlZCB0byB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gQW4gb3B0aW9uYWwgb2JqZWN0IGNvbnRhaW5pbmcgYXR0cmlidXRlcyB0byBiZVxuICogIGFkZGVkIHRvIHRoZSBlbGVtZW50LiBFYWNoIGtleSBtdXN0IGJlIGEgdmFsaWQgSFRNTCBhdHRyaWJ1dGUgYW5kIHRoZSB2YWx1ZVxuICogIG11c3QgYmUgYSBzdHJpbmcuXG4gKlxuICogQHJldHVybnMge0VsZW1lbnR9IFRoZSBuZXdseS1jcmVhdGVkIEhUTUwgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRWxlbWVudCh0YWdOYW1lID0gJ2RpdicsIGtsYXNzZXMgPSBbXSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0ICRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gIGFkZENsYXNzZXMoJGVsLCBrbGFzc2VzKTtcbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaCgoYXR0cikgPT4ge1xuICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcbiAgICAgICAgYWRkU3R5bGVGcm9tT2JqKCRlbCwgb3B0aW9uc1thdHRyXSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHIgPT09ICdrbGFzc2VzJykge1xuICAgICAgICBhZGRDbGFzc2VzKCRlbCwgb3B0aW9uc1thdHRyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkZWwuc2V0QXR0cmlidXRlKGF0dHIsIG9wdGlvbnNbYXR0cl0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuICRlbDtcbn1cblxuLyoqXG4gKiBnZW5lcmF0ZUJ1dHRvbiAtIFF1aWNrbHkgZ2VuZXJhdGUgYSBidXR0b24gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWU9QnV0dG9uXSBEZXNjcmlwdGlvblxuICogQHBhcmFtIHthcnJheX0gIFtrbGFzc2VzPVtdXSAgIERlc2NyaXB0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gW2lkPV0gICAgICAgICAgRGVzY3JpcHRpb25cbiAqXG4gKiBAcmV0dXJucyB7dHlwZX0gRGVzY3JpcHRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQnV0dG9uKFxuICB2YWx1ZSA9ICdCdXR0b24nLFxuICBrbGFzc2VzID0gW10sXG4gIGlubmVySFRNTCA9IGZhbHNlLFxuICBvcHRpb25zID0ge30sXG4pIHtcbiAgY29uc3QgJGJ0biA9IGdlbmVyYXRlRWxlbWVudCgnYnV0dG9uJywga2xhc3Nlcywgb3B0aW9ucyk7XG4gIGlmIChpbm5lckhUTUwpICRidG4uaW5uZXJIVE1MID0gdmFsdWU7XG4gIGVsc2UgJGJ0bi50ZXh0Q29udGVudCA9IHZhbHVlO1xuICByZXR1cm4gJGJ0bjtcbn1cblxuXG4vKipcbiAqIGlzVGFyZ2V0IC0gRGV0ZWN0IHdoZXRoZXIgZ2l2ZW4gZWxlbWVudCBvciBpdHMgY2hpbGRyZW4gd2VyZSB0aGUgdGFyZ2V0IG9mXG4gKiAgYSBKYXZhU2NyaXB0IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gJGVsIFRoZSBIVE1MIGVsZW1lbnQgb24gd2hpY2ggdG8gZGV0ZWN0IHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge0V2ZW50fSBlICAgIFRoZSBKYXZhU2NyaXB0IGV2ZW50LlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm4gdHJ1ZSBpZiB0aGUgZ2l2ZW4gZWxlbWVudCBvciBvbmUgb2YgaXRzIGNoaWxkcmVuXG4gKiAgd2FzIHRoZSB0YXJnZXQgb2YgdGhlIGV2ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUYXJnZXQoJGVsLCBlKSB7XG4gIHJldHVybiAkZWwuY29udGFpbnMoZS50YXJnZXQpO1xufVxuXG4vKipcbiAqIGlzRGVsZXRpb25LZXkgLSBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGtleSBpbiB0aGUgZ2l2ZW4gS2V5Ym9hcmRFdmVudCB3aWxsXG4gKiAgZGVsZXRlIGFueSBjaGFyYWN0ZXJzIG9yIHdvcmRzLiBCZWNhdXNlIG9mIGEgcGVjdWxpYXJpdHkgd2l0aCBGaXJlRm94LCB3ZVxuICogIG11c3Qgc3BlY2lmaWNhbGx5IHRlc3QgZm9yIG1ldGFrZXlzIChjdHJsLCBzaGlmdCwgYWx0LCBhbmRcbiAqICBtZXRhS2V5IChXaW5kb3dzL0NtZCkpLlxuICpcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnQgVGhlIEtleWJvYXJkRXZlbnQgdG8gdGVzdC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBrZXkgaXMgYSBkZWxldGlvbiBrZXksIGVsc2UgZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RlbGV0aW9uS2V5KGV2ZW50KSB7XG4gIHJldHVybiAoZXZlbnQua2V5ID09PSAnQmFja3NwYWNlJylcbiAgICB8fCAoZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXkgPT09ICdCYWNrc3BhY2UnKVxuICAgIHx8IChldmVudC5zaGlmdEtleSAmJiBldmVudC5rZXkgPT09ICdCYWNrc3BhY2UnKVxuICAgIHx8IChldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5ID09PSAnQmFja3NwYWNlJylcbiAgICB8fCAoZXZlbnQubWV0YUtleSAmJiBldmVudC5rZXkgPT09ICdCYWNrc3BhY2UnKVxuICAgIHx8IChldmVudC5rZXkgPT09ICdEZWxldGUnKVxuICAgIHx8IChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PT0gJ0RlbGV0ZScpXG4gICAgfHwgKGV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LmtleSA9PT0gJ0RlbGV0ZScpXG4gICAgfHwgKGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXkgPT09ICdEZWxldGUnKVxuICAgIHx8IChldmVudC5tZXRhS2V5ICYmIGV2ZW50LmtleSA9PT0gJ0RlbGV0ZScpXG4gICAgfHwgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09ICd4JylcbiAgICB8fCAoZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09ICd4JylcbiAgICB8fCAoZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSAneCcpXG4gICAgfHwgKGV2ZW50Lm1ldGFLZXkgJiYgZXZlbnQua2V5LnRvTG93ZXJDYXNlKCkgPT09ICd4Jyk7XG59XG5cbi8qKlxuICogdmFsaWRhdGVVUkwgLSBBIHZlcnkgc2ltcGxlIHVybCB2YWxpZGF0b3IgdGhhdCBjaGVja3MgZm9yIGF0IGxlYXN0IG9uZSBkb3RcbiAqICBhbmQgZm9yIGh0dHAgb3IgaHR0cHMuIElmIGl0IGhhcyBhIGRvdCBidXQgbm8gaHR0cChzKSwgaHR0cDovLyB3aWxsIGJlXG4gKiAgcHJlcGVuZGVkIGJlZm9yZSB0aGUgdXJsIGlzIHJldHVybmVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIHVybCB0byB2YWxpZGF0ZVxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmcgfHwgYm9vbGVhbn0gUmV0dXJucyB0aGUgdXJsICh3aXRoIGh0dHA6Ly8gcHJlcGVuZGVkIGlmXG4qICAgYXBwbGljYWJsZSkgaWYgdXJsIGlzIHZhbGlkLiBFbHNlIHJldHVybnMgZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVVSTCh1cmwpIHtcbiAgbGV0IHJldHVyblZhbDtcbiAgaWYgKCF1cmwuaW5jbHVkZXMoJy4nKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIXVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgJiYgIXVybC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7XG4gICAgcmV0dXJuVmFsID0gYGh0dHA6Ly8ke3VybH1gO1xuICB9IGVsc2Uge1xuICAgIHJldHVyblZhbCA9IHVybDtcbiAgfVxuICByZXR1cm4gcmV0dXJuVmFsO1xufVxuXG4vKipcbiAqIGZpbmRQYXJlbnRCbG9jayAtIEZpbmRzIHRoZSBuZWFyZXN0IGFuY2VzdG9yIG9mIHRoZSBnaXZlbiBlbGVtZW50IHdoaWNoIGlzXG4gKiAgb2YgdGhlIHR5cGVzIGxpc3RlZCBpbiBwYXJlbnRUYWdzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gJGVsIFRoZSBFbGVtZW50IG9mIHdoaWNoIHRvIGZpbmQgYW4gYWNjZXB0YWJsZSBwYXJlbnQgZWxlbWVudC5cbiAqXG4gKiBAcmV0dXJucyB7RWxlbWVudCB8fCBib29sZWFufSBJZiBubyBFbGVtZW50IG9mIGFuIGFjY2VwdGFibGUgdHlwZSBpcyBmb3VuZCxcbiAqICBvciBpZiB0aGUgZ2l2ZW4gJGVsIGlzbid0IGFuIEhUTUwgRWxlbWVudCwgd2lsbCByZXR1cm4gZmFsc2UuIEVsc2UgaXRcbiAqICByZXR1cm5zIHRoZSBmb3VuZCBIVE1MIEVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGFyZW50QmxvY2soJGVsKSB7XG4gIGNvbnN0IGJsb2NrVGFncyA9IFsnRElWJywgJ1AnLCAnSDEnLCAnSDInXTtcbiAgbGV0ICRyZXR1cm5FbCA9ICRlbDtcbiAgd2hpbGUgKCFibG9ja1RhZ3MuaW5jbHVkZXMoJHJldHVybkVsLnRhZ05hbWUpKSB7XG4gICAgJHJldHVybkVsID0gJHJldHVybkVsLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuICRyZXR1cm5FbDtcbn1cblxuLyoqXG4gKiBmaW5kTm9kZVR5cGUgLSBGaW5kcyBhIG5vZGUgb2YgdGhlIGdpdmVuIHRhcmdldFR5cGUuIFRoaXMgZnVuY3Rpb24gd2lsbFxuICogIGZpcnN0IGNoZWNrIHRoZSBnaXZlbiBub2RlJ3MgcGFyZW50LCB0aGVuIGl0c2VsZiwgdGhlbiBpdHMgY2hpbGRyZW4uIElmIG5vXG4gKiAgRWxlbWVudCBpcyBmb3VuZCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGZhbHNlLiBPdGhlcndpc2UgaXQgd2lsbCByZXR1cm5cbiAqICB0aGUgZm91bmQgRWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgICAgVGhlIEVsZW1lbnQgdG8gc2VhcmNoLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFR5cGUgVGhlIHRhZ05hbWUgb2YgdGhlIHRhcmdldCBFbGVtZW50IHR5cGUuXG4gKlxuICogQHJldHVybnMge0VsZW1lbnQgfHwgYm9vbGVhbn0gVGhlIGZvdW5kIEhUTUwgRWxlbWVudCBvciBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmROb2RlVHlwZShub2RlLCB0YXJnZXRUeXBlKSB7XG4gIGlmIChub2RlLm5vZGVOYW1lID09PSB0YXJnZXRUeXBlKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cbiAgaWYgKG5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gdGFyZ2V0VHlwZSkge1xuICAgIHJldHVybiBub2RlLnBhcmVudE5vZGU7XG4gIH1cbiAgbGV0IHJldHVybk5vZGUgPSBmYWxzZTtcbiAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICBBcnJheS5mcm9tKG5vZGUuY2hpbGRyZW4pLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICBjb25zdCBmb3VuZE5vZGUgPSBmaW5kTm9kZVR5cGUoY2hpbGQsIHRhcmdldFR5cGUpO1xuICAgICAgaWYgKGZvdW5kTm9kZSkge1xuICAgICAgICByZXR1cm5Ob2RlID0gZm91bmROb2RlO1xuICAgICAgICByZXR1cm4gcmV0dXJuTm9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmV0dXJuTm9kZTtcbn1cblxuLyoqXG4gKiBjb250YWluc1NlbGVjdGlvbiAtIENoZWNrIGlmIGEgZ2l2ZW4gc2VsZWN0aW9uIGNvbnRhaW5zIGEgZ2l2ZW4gbm9kZS4gV2lsbFxuICogIHJldHVybiB0cnVlIGV2ZW4gaWYgZ2l2ZW4gbm9kZSBpcyBvbmx5IHBhcnRpYWxseSBjb250YWluZWQgd2l0aGluIHRoZVxuICogIHNlbGVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsICBUaGUgc2VsZWN0aW9uIHRvIHRlc3QuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgICBUaGUgbm9kZSB0byBjaGVjayBmb3IuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbm9kZSBpcyBjb250YWluZWQsIGF0IGxlYXN0IGluXG4gKiAgcGFydCwgd2l0aGluIHRoZSBnaXZlbiBzZWxlY3Rpb24uIE90aGVyd2lzZSwgcmV0dXJucyBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zU2VsZWN0aW9uKHNlbCwgbm9kZSkge1xuICBpZiAoIShzZWwgaW5zdGFuY2VvZiBTZWxlY3Rpb24pKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiAoXG4gICAgKG5vZGUuY29udGFpbnMoc2VsLmFuY2hvck5vZGUpICYmIG5vZGUuY29udGFpbnMoc2VsLmZvY3VzTm9kZSkpXG4gICAgfHwgc2VsLmNvbnRhaW5zTm9kZShub2RlLCB0cnVlKVxuICApO1xufVxuXG4vKipcbiAqIGNvbGxhcHNlU2VsZWN0aW9uVG9SYW5nZSAtIENvbGxhcHNlcyB0aGUgZ2l2ZW4gU2VsZWN0aW9uIChzZWwpIHRvIHRoZSBlbmQgb2ZcbiAqICB0aGUgZ2l2ZW4gUmFuZ2UgKHJhbmdlKS5cbiAqXG4gKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsICBUaGUgU2VsZWN0aW9uIHRvIGNvbGxhcHNlLlxuICogQHBhcmFtIHtSYW5nZX0gcmFuZ2UgICAgVGhlIFJhbmdlIHRvIHVzZSB0byBjb2xsYXBzZSB0aGUgc2VsZWN0aW9uLlxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxhcHNlU2VsZWN0aW9uVG9SYW5nZShzZWwsIHJhbmdlLCB0b1N0YXJ0ID0gZmFsc2UpIHtcbiAgcmFuZ2UuY29sbGFwc2UodG9TdGFydCk7XG4gIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiB0YkNsYXNzKCkge1xuICBjb25zdCBvYmogPSB7fTtcbiAgb2JqLm1haW4gPSAnd2ZfX3Rvb2xiYXInO1xuICBvYmouYnRuID0gYCR7b2JqLm1haW59X19idG5gO1xuICBvYmouYnRuRGlzYWJsZWQgPSBgJHtvYmouYnRufS1kaXNhYmxlZGA7XG4gIG9iai5idG5BY3RpdmUgPSBgJHtvYmouYnRufS1hY3RpdmVgO1xuICBvYmouYnRuQ3RuID0gYCR7b2JqLmJ0bn0tY3RuYDtcbiAgb2JqLmlucHV0ID0gYCR7b2JqLm1haW59X19pbnB1dGA7XG4gIG9iai5pbnB1dEN0biA9IGAke29iai5pbnB1dH0tY3RuYDtcbiAgb2JqLmhpZGVVcCA9IGAke29iai5tYWlufS1oaWRlLXVwYDtcbiAgb2JqLmhpZGVEb3duID0gYCR7b2JqLm1haW59LWhpZGUtZG93bmA7XG4gIG9iai53aWRlID0gYCR7b2JqLm1haW59LXdpZGVgO1xuICByZXR1cm4gb2JqO1xufSgpKTtcbiIsImltcG9ydCB7XG4gIGdlbmVyYXRlRWxlbWVudCxcbiAgZ2VuZXJhdGVCdXR0b24sXG59IGZyb20gJy4uL3dyaXRlRnJlZUxpYi5qcyc7XG5cbmltcG9ydCB0YkNsYXNzIGZyb20gJy4vdGJDbGFzc2VzLmpzJztcblxuXG4vKlxuIyMjIyMjIyMgIyMjIyMjIyMgICMjIyMgIyMgICAgIyMgIyMjIyMjIyMgICMjICAgICAjIyAjIyMjIyMjI1xuICAgIyMgICAgIyMgICAgICMjICAjIyAgIyMjICAgIyMgIyMgICAgICMjICMjICAgICAjIyAgICAjI1xuICAgIyMgICAgIyMgICAgICMjICAjIyAgIyMjIyAgIyMgIyMgICAgICMjICMjICAgICAjIyAgICAjI1xuICAgIyMgICAgIyMjIyMjIyMgICAjIyAgIyMgIyMgIyMgIyMjIyMjIyMgICMjICAgICAjIyAgICAjI1xuICAgIyMgICAgIyMgICAgICMjICAjIyAgIyMgICMjIyMgIyMgICAgICAgICMjICAgICAjIyAgICAjI1xuICAgIyMgICAgIyMgICAgICMjICAjIyAgIyMgICAjIyMgIyMgICAgICAgICMjICAgICAjIyAgICAjI1xuICAgIyMgICAgIyMjIyMjIyMgICMjIyMgIyMgICAgIyMgIyMgICAgICAgICAjIyMjIyMjICAgICAjI1xuKi9cblxuLyoqXG4gKiBUb29sYmFySW5wdXQgLSBUaGUgdGV4dCBpbnB1dCBhcmVhIG9mIHRoZSBUb29sYmFyLiBUaGlzIGJhc2Ugb2JqZWN0IHByb3ZpZGVzXG4gKiAgdGV4dCBpbnB1dCB0byB1c2VycywgYWxsb3dpbmcgdGhlbSB0byBpbnNlcnQgdGhpbmdzIGxpa2UgaHlwZXJsaW5rcyBhbmRcbiAqICBpbWFnZSBVUklzLlxuICpcbiAqIEBwYXJhbSB7SFRNTCBFbGVtZW50fSAkY3RuIC0gVGhlIGNvbnRhaW5pbmcgZGl2IGZvciAkaW5wdXQgYW5kICRjbG9zZUJ0bi5cbiAqIEBwYXJhbSB7SFRNTCBFbGVtZW50fSAkaW5wdXQgLSBUaGUgdGV4dCBpbnB1dC5cbiAqIEBwYXJhbSB7SFRNTCBFbGVtZW50fSAkY2xvc2VCdG4gLSBUaGUgYnV0dG9uIHdoaWNoIGNsb3NlcyB0aGUgaW5wdXQuXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLyoqXG4gICAqIGluaXQgLSBJbml0aWFsaXplcyB0aGUgaW5wdXQgYnkgZ2VuZXJhdGluZyB0aGUgcmVxdWlzaXRlIEhUTUwgYW5kIGF0dGFjaGluZ1xuICAgKiAgdGhlIG5lY2Vzc2FyeSBldmVudCBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTCBFbGVtZW50fSBbJGN0bl0gLSBBbiBvcHRpb25hbCBjb250YWluZXIgSFRNTCBlbGVtZW50IHRvIHdoaWNoXG4gICAqICB0aGUgaW5wdXQgKG9yLCBtb3JlIGFjY3VyYXRlbHksIHRoZSBjb250YWluZXIpIHdpbGwgYmUgYXR0YWNoZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhpZGVDYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGlucHV0IGlzXG4gICAqICBoaWRkZW4uXG4gICAqXG4gICAqL1xuICBpbml0KGhpZGVDYWxsYmFjaywgJG91dGVyQ3RuKSB7XG4gICAgdGhpcy4kY3RuID0gZ2VuZXJhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICBbdGJDbGFzcy5pbnB1dEN0biwgdGJDbGFzcy5oaWRlRG93bl0sXG4gICAgKTtcbiAgICB0aGlzLiRpbnB1dCA9IGdlbmVyYXRlRWxlbWVudCgnaW5wdXQnLCB0YkNsYXNzLmlucHV0LCB7IHR5cGU6ICd0ZXh0JyB9KTtcbiAgICB0aGlzLiRjbG9zZUJ0biA9IGdlbmVyYXRlQnV0dG9uKCc8Yj4mdGltZXM7PC9iPicsIHRiQ2xhc3MuYnRuLCB0cnVlKTtcblxuICAgIHRoaXMuJGN0bi5hcHBlbmRDaGlsZCh0aGlzLiRpbnB1dCk7XG4gICAgdGhpcy4kY3RuLmFwcGVuZENoaWxkKHRoaXMuJGNsb3NlQnRuKTtcblxuICAgIHRoaXMuJGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oaWRlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuJGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5kZWZhdWx0RW50ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuaGlkZUNhbGxiYWNrID0gaGlkZUNhbGxiYWNrO1xuICAgIGlmICgkb3V0ZXJDdG4gJiYgJG91dGVyQ3RuIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHRoaXMuYXBwZW5kVG8oJG91dGVyQ3RuKTtcbiAgfSxcblxuICAvKipcbiAgICogZGVmYXVsdEVudGVySGFuZGxlciAtIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXNlciBwcmVzc2VzIGVudGVyXG4gICAqICB3aGlsZSB0eXBpbmcgaW4gdGhlIGlucHV0LiBXaGVuIHRoZSB1c2VyIHByZXNzZXMgJ0VudGVyJyBpbiB0aGUgaW5wdXRcbiAgICogIGZpZWxkLCB0aGlzIGZ1bmN0aW9uIHdpbGwgY2FsbCB0aGUgY3VycmVudCBzYXZlSGFuZGxlciwgYWx3YXlzIHBhc3NpbmcgaW5cbiAgICogIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgYW5kIHRoZSB2YWx1ZSBhc3NpZ25lZCB0byB0aGlzLmN1cnJlbnRSYW5nZS4gSXQgaXNcbiAgICogIGFzc3VtZWQgdGhhdCB0aGUgdmFsdWUgd2lsbCBhbHdheXMgYmUgcmVxdWlyZWQgYnkgdGhlIHNhdmVIYW5kbGVyIGFuZFxuICAgKiAgdGhhdCwgc2luY2UgaXQgaXMgaGlkZGVuIHdoaWxlIHRoZSBpbnB1dCBpcyBmb2N1c2VkLCBzbyB3aWxsIHRoZSBjdXJyZW50XG4gICAqICByYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZSBUaGUgRXZlbnQgdG8gbGlzdGVuIGZvci5cbiAgICpcbiAgICovXG4gIGRlZmF1bHRFbnRlckhhbmRsZXIoZSkge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnNhdmVIYW5kbGVyXG4gICAgICAgICYmIHR5cGVvZiB0aGlzLnNhdmVIYW5kbGVyID09PSAnZnVuY3Rpb24nXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zYXZlSGFuZGxlci5jYWxsKHRoaXMsIHRoaXMuJGlucHV0LnZhbHVlLCB0aGlzLmN1cnJlbnRSYW5nZSk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMucHJldmVudEhpZGVPbkVudGVyKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogc2V0U2F2ZUhhbmRsZXIgLSBTZXRzIHRoZSBzYXZlSGFuZGxlciBmb3IgdGhlIGlucHV0IHRvIHRoZSBnaXZlblxuICAgKiAgc2F2ZUhhbmRsZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNhdmVIYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXNlciBzYXZlc1xuICAgKiAgKHByZXNzZXMgRW50ZXIpIG9uIHRoZSBpbnB1dC5cbiAgICpcbiAgICovXG4gIHNldFNhdmVIYW5kbGVyKHNhdmVIYW5kbGVyKSB7XG4gICAgaWYgKHNhdmVIYW5kbGVyICYmIHR5cGVvZiBzYXZlSGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5zYXZlSGFuZGxlciA9IHNhdmVIYW5kbGVyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogY2xlYXJTYXZlSGFuZGxlciAtIFNldHMgdGhlIHNhdmVIYW5kbGVyIHRvIG51bGwuXG4gICAqXG4gICAqL1xuICBjbGVhclNhdmVIYW5kbGVyKCkge1xuICAgIHRoaXMuc2F2ZUhhbmRsZXIgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBnZXRWYWx1ZSAtIEdldCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0LlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdmFsdWUgb2YgdGhlICRpbnB1dC5cbiAgICovXG4gIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLiRpbnB1dC52YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogZGlzcGxheSAtIERpc3BsYXlzIHRoZSBpbnB1dCBieSByZW1vdmluZyBoaWRpbmcgY2xhc3MgZnJvbSB0aGUgaW5wdXRcbiAgICogIGNvbnRhaW5lciBhbmQgcGxhY2luZyB0aGUgZm9jdXMgaW4gdGhlIGlucHV0LiBXaWxsIGFsc28gYWNjZXB0IGFuIG9wdGlvbmFsXG4gICAqICBwbGFjZWhvbGRlciB3aGljaCB3aWxsIGJlIHBsYWNlZCBvbiB0aGUgaW5wdXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcGxhY2Vob2xkZXI9JyddIEFuIG9wdGlvbmFsIHN0cmluZyB3aGljaCB3aWxsIGJlIHNldCBhc1xuICAgKiAgdGhlIHBsYWNlaG9sZGVyIG9uIHRoZSBpbnB1dC5cbiAgICpcbiAgICovXG4gIGRpc3BsYXkocGxhY2Vob2xkZXIgPSAnJykge1xuICAgIHRoaXMuJGlucHV0LnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgdGhpcy4kY3RuLmNsYXNzTGlzdC5yZW1vdmUodGJDbGFzcy5oaWRlRG93bik7XG4gICAgLy8gcHV0IGZvY3VzIGluIHRoZSBpbnB1dC4gTXVzdCB0aW1lb3V0IGR1ZSB0byBhbmltYXRpb25zLlxuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICB0aGlzLmN1cnJlbnRSYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByYW5nZS5zZWxlY3ROb2RlKHRoaXMuJGlucHV0KTtcbiAgICBmdW5jdGlvbiBmb2N1c0lucHV0KCkge1xuICAgICAgdGhpcy4kaW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gICAgc2V0VGltZW91dChmb2N1c0lucHV0LmJpbmQodGhpcyksIDIwMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGNsZWFyIC0gQ2xlYXJzIHRoZSBpbnB1dC5JZiBhIG5ldyBwbGFjZWhvbGRlciBpcyBwcm92aWRlZCwgd2lsbCBzZXQgdGhlXG4gICAqICBpbnB1dCdzIHBsYWNlaG9sZGVyIHRvIHRoYXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbmV3UGxhY2Vob2xkZXJdIFRoZSBuZXcgcGxhY2Vob2xkZXIgdG8gYmUgcHV0IG9uIHRoZVxuICAgKiAgaW5wdXQuXG4gICAqXG4gICAqL1xuICBjbGVhcihuZXdQbGFjZWhvbGRlcikge1xuICAgIHRoaXMuJGlucHV0LnZhbHVlID0gJyc7XG4gICAgaWYgKG5ld1BsYWNlaG9sZGVyKSB7XG4gICAgICB0aGlzLiRpbnB1dC5wbGFjZWhvbGRlciA9IG5ld1BsYWNlaG9sZGVyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogaGlkZSAtIEhpZGVzIHRoZSBpbnB1dCBjb250YWluZXIgYW5kIGNhbGxzIHRoZSBzYXZlZCBoaWRlQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqXG4gICAqL1xuICBoaWRlKHVzZUNhbGxiYWNrID0gdHJ1ZSkge1xuICAgIC8vIGRlYnVnZ2VyO1xuICAgIGlmICh0aGlzLiRjdG4uY2xhc3NMaXN0LmNvbnRhaW5zKHRiQ2xhc3MuaGlkZURvd24pKSByZXR1cm4gZmFsc2U7XG4gICAgdGhpcy4kY3RuLmNsYXNzTGlzdC5hZGQodGJDbGFzcy5oaWRlRG93bik7XG4gICAgdGhpcy4kaW5wdXQudmFsdWUgPSAnJztcbiAgICB0aGlzLmNsZWFyU2F2ZUhhbmRsZXIoKTtcbiAgICBpZiAodGhpcy5jdXJyZW50UmFuZ2UpIHtcbiAgICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGNvbnN0IHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICBzZWwucmVtb3ZlUmFuZ2UocmFuZ2UpO1xuICAgICAgc2VsLmFkZFJhbmdlKHRoaXMuY3VycmVudFJhbmdlKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdXNlQ2FsbGJhY2tcbiAgICAgICYmIHRoaXMuaGlkZUNhbGxiYWNrXG4gICAgICAmJiB0eXBlb2YgdGhpcy5oaWRlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbidcbiAgICApIHtcbiAgICAgIHRoaXMuaGlkZUNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBodG1sIC0gUmV0dXJuIHRoZSBIVE1MIGZvciB0aGUgaW5wdXQgY29udGFpbmVyLlxuICAgKlxuICAgKi9cbiAgaHRtbCgpIHtcbiAgICByZXR1cm4gdGhpcy4kY3RuO1xuICB9LFxuXG4gIC8qKlxuICAgKiBnZXRXaWR0aCAtIFJldHVybnMgdGhlIHdpZHRoIG9mIHRoZSBpbnB1dCBjb250YWluZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB3aWR0aCBvZiB0aGUgaW5wdXQgY29udGFpbmVyLlxuICAgKi9cbiAgZ2V0V2lkdGgoKSB7XG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gdGhpcy4kY3RuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBib3VuZGluZ1JlY3Qud2lkdGg7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGdldFdpZHRoIC0gUmV0dXJucyB0aGUgaGVpZ2h0IG9mIHRoZSBpbnB1dCBjb250YWluZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBoZWlnaHQgb2YgdGhlIGlucHV0IGNvbnRhaW5lci5cbiAgICovXG4gIGdldEhlaWdodCgpIHtcbiAgICBjb25zdCBib3VuZGluZ1JlY3QgPSB0aGlzLiRjdG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIGJvdW5kaW5nUmVjdC5oZWlnaHQ7XG4gIH0sXG4gIC8qKlxuICAgKiBhcHBlbmRUbyAtIEFwcGVuZHMgdGhlIGlucHV0IHRvIHRoZSBnaXZlbiBIVE1MIEVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gJHdoZXJlIFRoZSBIVE1MIEVsZW1lbnQgdG8gd2hpY2ggdGhlIGlucHV0IHdpbGwgYmVcbiAgICogIGFwcGVuZGVkXG4gICAqXG4gICAqIEByZXR1cm5zIHtFbGVtZW50fSBUaGUgJHdoZXJlIEhUTUwgRWxlbWVudC5cbiAgICovXG4gIGFwcGVuZFRvKCR3aGVyZSkge1xuICAgICR3aGVyZS5hcHBlbmRDaGlsZCh0aGlzLmh0bWwoKSk7XG4gICAgcmV0dXJuICR3aGVyZTtcbiAgfSxcbn07XG4iLCJpbXBvcnQge1xuICBnZW5lcmF0ZUVsZW1lbnQsXG59IGZyb20gJy4uL3dyaXRlRnJlZUxpYi5qcyc7XG5cbmltcG9ydCB0YkNsYXNzIGZyb20gJy4vdGJDbGFzc2VzLmpzJztcbmltcG9ydCBUb29sYmFySW5wdXQgZnJvbSAnLi90YklucHV0LmpzJztcblxuXG4vLyBUaGUgbnVtYmVyIG9mIHBpeGVscyBieSB3aGljaCB0byBvZmZzZXQgdGhlIHRvcCBvZiB0aGUgdG9vbGJhci5cbmNvbnN0IHRvb2xiYXJPZmZzZXQgPSA1O1xuXG4vKipcbiAqIFRvb2xiYXIgLSBUaGUgdG9vbGJhciB1c2VkIGZvciBlZGl0aW5nIHRleHQgaW4gdGhlIFdGRWRpdG9yLlxuICpcbiAqIEBwcm9wZXJ0eSB7RWxlbWVudH0gJGN0biAtIFRoZSBkaXYgY29udGFpbmluZyB0aGUgdG9vbGJhci4gVGhpcyBkaXYgaXNcbiAqICBjcmVhdGVkIGluIHRoZSBpbml0VG9vbGJhciBtZXRob2QuXG4gKiBAcHJvcGVydHkge0VsZW1lbnR9ICRib2xkQnRuIC0gV2hlbiBjbGlja2VkLCBib2xkcyBjdXJyZW50IHNlbGVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RWxlbWVudH0gJGl0YWxpY0J0biAtIFdoZW4gY2xpY2tlZCwgaXRhbGljaXplcyBjdXJyZW50IHNlbGVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RWxlbWVudH0gJGhlYWRpbmdCdG4gLSBXaGVuIGNsaWNrZWQsIGNoYW5nZXMgdGhlIHNlY3Rpb24gb2YgdGhlXG4gKiAgY3VycmVudCBzZWxlY3Rpb24gdG8gYSBoZWFkaW5nIChoMykuXG4gKiBAcHJvcGVydHkge0VsZW1lbnR9IGxpbmtCdG4gLSBXaGVuIGNsaWNrZWQsIHByZXNlbnRzIGEgYm94IGZvciBpbnNlcnRpbmcgYVxuICogIFVSTCwgdGhlbiB1c2VzIHRoYXQgVVJMIHRvIHR1cm4gY3VycmVudCBzZWxlY3Rpb24gaW50byBhIGh5cGVybGluay5cbiAqL1xuY29uc3QgQmFzZVRvb2xiYXIgPSB7XG5cbiAgLyoqXG4gICAqIGluaXRUb29sYmFyIC0gSW5pdGlhbGl6ZXMgdGhlIFRvb2xiYXIuXG4gICAqXG4gICAqIEBwYXJhbSB7RWRpdG9yfSBlZGl0b3IgVGhlIEVkaXRvciB3aGljaCBvd25zIHRoaXMgVG9vbGJhci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIGluaXRpYWxpemF0aW9uIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHVzZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtUb29sYmFyfSBSZXR1cm5zIHRoaXMuXG4gICAqL1xuICBpbml0VG9vbGJhcihlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgIHRoaXMudG9vbGJhck9mZnNldCA9IHRvb2xiYXJPZmZzZXQ7XG4gICAgdGhpcy4kY3RuID0gZ2VuZXJhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICBbdGJDbGFzcy5tYWluLCAnaGlkZSddLFxuICAgICAgeyBjb250ZW50ZWRpdGFibGU6IGZhbHNlIH0sXG4gICAgKTtcbiAgICB0aGlzLiRidG5DdG4gPSBnZW5lcmF0ZUVsZW1lbnQoJ2RpdicsIHRiQ2xhc3MuYnRuQ3RuKTtcbiAgICB0aGlzLiRjdG4uYXBwZW5kQ2hpbGQodGhpcy4kYnRuQ3RuKTtcblxuICAgIC8vIHRoaXMuY3JlYXRlVG9vbGJhckJ0bnMoKTtcbiAgICB0aGlzLmlucHV0ID0gT2JqZWN0LmNyZWF0ZShUb29sYmFySW5wdXQpO1xuICAgIHRoaXMuZWRpdG9yLiRjdG4uYXBwZW5kQ2hpbGQodGhpcy4kY3RuKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICogZ2V0QnV0dG9uc1dpZHRoIC0gUmV0dXJucyB0aGUgd2lkdGggb2YgdGhlIGJ1dHRvbiBjb250YWluZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB3aWR0aCBvZiB0aGUgYnV0dG9uIGNvbnRhaW5lci5cbiAgICovXG4gIGdldEJ1dHRvbnNXaWR0aCgpIHtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gdGhpcy4kYnRuQ3RuLmNoaWxkcmVuO1xuICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IGNoaWxkTm9kZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIGJvdW5kaW5nUmVjdC53aWR0aCAqIChjaGlsZE5vZGVzLmxlbmd0aCAqIDEuMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGdldEJ1dHRvbnNXaWR0aCAtIFJldHVybnMgdGhlIGhlaWdodCBvZiB0aGUgYnV0dG9uIGNvbnRhaW5lci5cbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn0gVGhlIGhlaWdodCBvZiB0aGUgYnV0dG9uIGNvbnRhaW5lci5cbiAgICovXG4gIGdldEJ1dHRvbnNIZWlnaHQoKSB7XG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gdGhpcy4kYnRuQ3RuLmZpcnN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIGJvdW5kaW5nUmVjdC5oZWlnaHQgKiAxLjI1O1xuICB9LFxuXG4gIC8qKlxuICAgKiBoaWRlQnV0dG9ucyAtIEhpZGVzIHRoZSBidXR0b25zIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRvb2xiYXIgc28gdGhlIGlucHV0XG4gICAqICBjYW4gYmUgZGlzcGxheWVkLlxuICAgKlxuICAgKi9cbiAgaGlkZUJ1dHRvbnMoKSB7XG4gICAgdGhpcy4kY3RuLnN0eWxlLndpZHRoID0gYCR7dGhpcy5pbnB1dC5nZXRXaWR0aCgpfXB4YDtcbiAgICB0aGlzLiRjdG4uc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5pbnB1dC5nZXRIZWlnaHQoKX1weGA7XG4gICAgdGhpcy4kYnRuQ3RuLmNsYXNzTGlzdC5hZGQodGJDbGFzcy5oaWRlVXApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBkaXNwbGF5QnV0dG9ucyAtIERpc3BsYXlzIHRoZSBidXR0b25zIGluIHRoZSBUb29sYmFyLlxuICAgKlxuICAgKi9cbiAgZGlzcGxheUJ1dHRvbnMoKSB7XG4gICAgdGhpcy4kYnRuQ3RuLmNsYXNzTGlzdC5yZW1vdmUodGJDbGFzcy5oaWRlVXApO1xuICAgIHRoaXMuJGN0bi5zdHlsZS53aWR0aCA9IGAke3RoaXMuZ2V0QnV0dG9uc1dpZHRoKCl9cHhgO1xuICAgIHRoaXMuJGN0bi5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmdldEJ1dHRvbnNIZWlnaHQoKX1weGA7XG4gIH0sXG5cbiAgZGlzcGxheUlucHV0KHBsYWNlaG9sZGVyKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHRoaXMuY3VycmVudFJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgdGhpcy5pbnB1dC5kaXNwbGF5KHBsYWNlaG9sZGVyKTtcbiAgfSxcblxuICBoaWRlSW5wdXQoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgKiBwb3NpdGlvblRvb2xiYXIgLSBQb3NpdGlvbnMgdGhlIFRvb2xiYXIgYXQgdGhlIGFwcHJvcHJpYXRlIHBsYWNlIGJhc2VkIG9uXG4gICogIHRoZSBjdXJyZW50IHJhbmdlLlxuICAqXG4gICovXG4gIHBvc2l0aW9uVG9vbGJhcigpIHtcbiAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgdGhpcy5jdXJyZW50UmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcbiAgICBsZXQgcmVjdCA9IG51bGw7XG4gICAgaWYgKHRoaXMuY3VycmVudFJhbmdlLmNvbGxhcHNlZCkge1xuICAgICAgcmVjdCA9IHRoaXMuY3VycmVudFJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWN0ID0gdGhpcy5jdXJyZW50UmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgfVxuICAgIGNvbnN0IHRvb2xiYXJSZWN0ID0gdGhpcy4kY3RuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGJvdHRvbVBvcyA9IHJlY3QuYm90dG9tICsgdGhpcy50b29sYmFyT2Zmc2V0ICsgdG9vbGJhclJlY3QuaGVpZ2h0O1xuICAgIGlmIChib3R0b21Qb3MgPj0gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICB0aGlzLiRjdG4uc3R5bGUudG9wID0gYCR7cmVjdC50b3AgLSAodGhpcy50b29sYmFyT2Zmc2V0ICsgdG9vbGJhclJlY3QuaGVpZ2h0KX1weGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGN0bi5zdHlsZS50b3AgPSBgJHtyZWN0LmJvdHRvbSArIHRoaXMudG9vbGJhck9mZnNldH1weGA7XG4gICAgfVxuICAgIHRoaXMuJGN0bi5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgfSxcblxuICAvKipcbiAgICogZGlzcGxheSAtIE9wdGlvbmFsbHkgZGlzcGxheSB0aGUgVG9vbGJhciBuZXh0IHRvIHRoZSBnaXZlbiBzZWxlY3Rpb24uXG4gICAqICBUaGUgVG9vbGJhciBpcyBhbHdheXMgcmV0dXJuZWQgYXMgYW4gSFRNTCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1NlbGVjdGlvbn0gW3NlbD1udWxsXSBUaGUgU2VsZWN0aW9uIG5leHQgdG8gd2hpY2ggdGhlIFRvb2xiYXIgc2hvdWxkIGJlXG4gICAqICBkaXNwbGF5ZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIFRvb2xiYXIgaXMgZGlzcGxheWVkLiBFbHNlIGZhbHNlLlxuICAgKi9cbiAgYmFzZURpc3BsYXkoKSB7XG4gICAgdGhpcy5pbnB1dC5oaWRlKGZhbHNlKTtcbiAgICB0aGlzLiRjdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgIHRoaXMucG9zaXRpb25Ub29sYmFyKCk7XG4gICAgdGhpcy5kaXNwbGF5QnV0dG9ucygpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBoaWRlIC0gSGlkZXMgdGhlIFRvb2xiYXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgc3VjY2Vzc2Z1bCBlbHNlIGZhbHNlLlxuICAgKi9cbiAgaGlkZSgpIHtcbiAgICB0aGlzLmN1cnJlbnRSYW5nZSA9IG51bGw7XG4gICAgdGhpcy5pbnB1dC5oaWRlKGZhbHNlKTtcbiAgICB0aGlzLmRpc3BsYXlCdXR0b25zKCk7XG4gICAgdGhpcy4kY3RuLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICBpZiAodGhpcy4kY3RuLmNsYXNzTGlzdC5jb250YWlucygnaGlkZScpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBodG1sIC0gUmVuZGVyIHRoZSBUb29sYmFyIGFzIEhUTUxcbiAgICpcbiAgICogQHJldHVybnMge0VsZW1lbnR9IFRoZSBUb29sYmFyIGFzIEhUTUwuXG4gICAqL1xuICBodG1sKCkge1xuICAgIHJldHVybiB0aGlzLiRjdG47XG4gIH0sXG5cbiAgY29udGFpbnMobm9kZSkge1xuICAgIHJldHVybiB0aGlzLiRjdG4uY29udGFpbnMobm9kZSk7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBCYXNlVG9vbGJhcjtcbiIsImltcG9ydCB7XG4gIGdlbmVyYXRlQnV0dG9uLFxufSBmcm9tICcuLi93cml0ZUZyZWVMaWIuanMnO1xuXG5pbXBvcnQgdGJDbGFzcyBmcm9tICcuL3RiQ2xhc3Nlcy5qcyc7XG5cbi8qXG4jIyMjIyMjIyAjIyMjIyMjIyAgIyMjIyMjIyMgICMjICAgICAjIyAjIyMjIyMjIyAjIyMjIyMjIyAgIyMjIyMjIyAgIyMgICAgIyNcbiAgICMjICAgICMjICAgICAjIyAjIyAgICAgIyMgIyMgICAgICMjICAgICMjICAgICAgICMjICAgICMjICAgICAjIyAjIyMgICAjI1xuICAgIyMgICAgIyMgICAgICMjICMjICAgICAjIyAjIyAgICAgIyMgICAgIyMgICAgICAgIyMgICAgIyMgICAgICMjICMjIyMgICMjXG4gICAjIyAgICAjIyMjIyMjIyAgIyMjIyMjIyMgICMjICAgICAjIyAgICAjIyAgICAgICAjIyAgICAjIyAgICAgIyMgIyMgIyMgIyNcbiAgICMjICAgICMjICAgICAjIyAjIyAgICAgIyMgIyMgICAgICMjICAgICMjICAgICAgICMjICAgICMjICAgICAjIyAjIyAgIyMjI1xuICAgIyMgICAgIyMgICAgICMjICMjICAgICAjIyAjIyAgICAgIyMgICAgIyMgICAgICAgIyMgICAgIyMgICAgICMjICMjICAgIyMjXG4gICAjIyAgICAjIyMjIyMjIyAgIyMjIyMjIyMgICAjIyMjIyMjICAgICAjIyAgICAgICAjIyAgICAgIyMjIyMjIyAgIyMgICAgIyNcbiovXG5cbi8qKlxuKiBUb29sYmFyQnV0dG9uIC0gQSBidXR0b24gdG8gYmUgdXNlZCBpbiB0aGUgVG9vbGJhci4gVGhpcyBiYXNlIG9iamVjdCBwcm92aWRlc1xuKiAgYSBjb252ZW5pZW50IHNldCBvZiBtZXRob2RzIGZvciBjcmVhdGluZywgYXR0YWNoaW5nIGV2ZW50IGxpc3RlbmVycyB0bywgYW5kXG4qICBjaGFuZ2luZyB0aGUgYXBwZWFyYW5jZSBvZiBidXR0b25zIG9uIHRoZSBUb29sYmFyLlxuKlxuKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIGluaXQgLSBJbml0aWFsaXplcyB0aGUgYnV0dG9uIGJ5IGNyZWF0aW5nIHRoZSByZXF1aXNpdGUgSFRNTCAodXNpbmcgdGhlXG4gICAqICBnaXZlbiBjb250ZW50KSwgYXR0YWNoaW5nIHRoZSBnaXZlbiBjbGlja0hhbmRsZXIsIGFuZCwgaWYgY3RuIGlzIHByb3ZpZGVkLFxuICAgKiAgYXR0YWNoaW5nIHRoZSBodG1sIHRvIHRoZSBnaXZlbiBjb250YWluZXIgRWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MIHN0cmluZyB8fCBzdHJpbmd9IGNvbnRlbnQgVGhlIGNvbnRlbnQgd2hpY2ggd2lsbCBiZSBwbGFjZWQgaW5cbiAgICogIHRoZSBidXR0b24uIFRoaXMgY2FuIGJlIGVpdGhlciBhIHNpbXBsZSBzdHJpbmcgb3IgYSBzdHJpbmcgY29udGFpbmluZ1xuICAgKiAgSFRNTC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xpY2tIYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBiZSBhdHRhY2hlZCB0byB0aGUgYnV0dG9uJ3NcbiAgICogIEhUTUwgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkLlxuICAgKiBAcGFyYW0ge0hUTUwgRWxlbWVudCAob3B0KX0gJGN0biBUaGUgb3B0aW9uYWwgY29udGFpbmluZyBIVE1MIEVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtUb29sYmFyQnV0dG9ufSBSZXR1cm5zIHRoaXMgVG9vbGJhckJ1dHRvbi5cbiAgICovXG4gIGluaXQoY29udGVudCwgdGl0bGUsIGhhbmRsZXIsICRjdG4pIHtcbiAgICB0aGlzLiRodG1sID0gZ2VuZXJhdGVCdXR0b24oY29udGVudCwgdGJDbGFzcy5idG4sIHRydWUsIHsgdGl0bGUgfSk7XG4gICAgdGhpcy5zZXRTYXZlSGFuZGxlcihoYW5kbGVyKTtcbiAgICB0aGlzLmFwcGVuZFRvKCRjdG4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBzZXRTYXZlSGFuZGxlciAtIFNldHMgdGhlIGNsaWNrSGFuZGxlciB0byB0aGUgZ2l2ZW4gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNhdmVIYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBjYWxsIG9uIGVhY2ggY2xpY2suXG4gICAqXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbiB8fCBudWxsfSBSZXR1cm5zIG51bGwgaWYgdGhlIGdpdmVuIHNhdmVIYW5kbGVyIGlzIG5vdCBhXG4gICAqICBGdW5jdGlvbi4gT3RoZXJ3aXNlIGl0IHJldHVybnMgdGhlIEZ1bmN0aW9uLlxuICAgKi9cbiAgc2V0U2F2ZUhhbmRsZXIoc2F2ZUhhbmRsZXIpIHtcbiAgICBpZiAodHlwZW9mIHNhdmVIYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2xpY2tIYW5kbGVyKSB7XG4gICAgICB0aGlzLiRodG1sLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICB0aGlzLnNhdmVIYW5kbGVyID0gc2F2ZUhhbmRsZXI7XG4gICAgdGhpcy4kaHRtbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2F2ZUhhbmRsZXIpO1xuICAgIHJldHVybiB0aGlzLnNhdmVIYW5kbGVyO1xuICB9LFxuXG4gIC8qKlxuICAgKiBhZGRDbGFzcyAtIEFkZHMgYSBjbGFzcyBvciBtdWx0aXBsZSBjbGFzc2VzIHRvIHRoZSBidXR0b24ncyBodG1sLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5IHx8IHN0cmluZ30gW2tsYXNzZXNdIFRoZSBjbGFzcyhlcykgdG8gYmUgYWRkZWQgdG8gdGhlIGJ1dHRvbi5cbiAgICogIENhbiBlaXRoZXIgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBhIHNpbmdsZSBzdHJpbmcuXG4gICAqXG4gICAqL1xuICBhZGRDbGFzcyhrbGFzc2VzID0gW10pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShrbGFzc2VzKSkge1xuICAgICAga2xhc3Nlcy5mb3JFYWNoKChrbGFzcykgPT4ge1xuICAgICAgICB0aGlzLiRodG1sLmNsYXNzTGlzdC5hZGQoa2xhc3MpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGh0bWwuY2xhc3NMaXN0LmFkZChrbGFzc2VzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIHJlbW92ZUNsYXNzIC0gUmVtb3ZlcyBhIGNsYXNzIG9yIG11bHRpcGxlIGNsYXNzZXMgZnJvbSB0aGUgYnV0dG9uJ3MgaHRtbC5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheSB8fCBzdHJpbmd9IFtrbGFzc2VzXSBUaGUgY2xhc3MoZXMpIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGVcbiAgICogIGJ1dHRvbi4gQ2FuIGVpdGhlciBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIG9yIGEgc2luZ2xlIHN0cmluZy5cbiAgICpcbiAgICovXG4gIHJlbW92ZUNsYXNzKGtsYXNzZXMgPSBbXSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGtsYXNzZXMpKSB7XG4gICAgICBrbGFzc2VzLmZvckVhY2goKGtsYXNzKSA9PiB7XG4gICAgICAgIHRoaXMuJGh0bWwuY2xhc3NMaXN0LnJlbW92ZShrbGFzcyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kaHRtbC5jbGFzc0xpc3QucmVtb3ZlKGtsYXNzZXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogZGlzYWJsZSAtIERpc2FibGVzIHRoZSBidXR0b24uIFNldHMgdGhlIGRpc2FibGVkIGF0dHJpYnV0ZSB0byB0cnVlIGFuZCBhZGRzXG4gICAqICB0aGUgZGlzYWJsZWQgY2xhc3MgdG8gdGhlIGJ1dHRvbi5cbiAgICpcbiAgICovXG4gIGRpc2FibGUoKSB7XG4gICAgdGhpcy4kaHRtbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5hZGRDbGFzcyh0YkNsYXNzLmJ0bkRpc2FibGVkKTtcbiAgfSxcblxuICAvKipcbiAgICogZW5hYmxlIC0gRW5hYmxlcyB0aGUgYnV0dG9uLiBTZXRzIHRoZSBkaXNhYmxlZCBhdHRyaWJ1dGUgdG8gZmFsc2UgYW5kXG4gICAqICByZW1vdmVzIHRoZSBkaXNhYmxlZCBjbGFzcyBmcm9tIHRoZSBidXR0b24uXG4gICAqXG4gICAqL1xuICBlbmFibGUoKSB7XG4gICAgdGhpcy4kaHRtbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMucmVtb3ZlQ2xhc3ModGJDbGFzcy5idG5EaXNhYmxlZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIG1hcmtBY3RpdmUgLSBNYXJrcyB0aGUgYnV0dG9uIGFzIGN1cnJlbnRseSBhY3RpdmUuIFNpbXBseSBhZGRzIHRoZSBhY3RpdmVcbiAgICogIGNsYXNzIHRvIHRoZSBidXR0b24uXG4gICAqXG4gICAqL1xuICBtYXJrQWN0aXZlKCkge1xuICAgIHRoaXMuJGh0bWwuY2xhc3NMaXN0LmFkZCh0YkNsYXNzLmJ0bkFjdGl2ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIG1hcmtJbmFjdGl2ZSAtIE1hcmtzIHRoZSBidXR0b24gYXMgY3VycmVudGx5IGluYWN0aXZlLiBTaW1wbHkgcmVtb3ZlcyB0aGVcbiAgICogIGFjdGl2ZSBjbGFzcyBmcm9tIHRoZSBidXR0b24uXG4gICAqXG4gICAqL1xuICBtYXJrSW5hY3RpdmUoKSB7XG4gICAgdGhpcy4kaHRtbC5jbGFzc0xpc3QucmVtb3ZlKHRiQ2xhc3MuYnRuQWN0aXZlKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBodG1sIC0gUmV0dXJucyB0aGUgYnV0dG9uIGluIEhUTUwgZm9ybS5cbiAgICpcbiAgICogQHJldHVybnMge0VsZW1lbnR9IFRoZSBidXR0b24gaW4gSFRNTCBmb3JtLlxuICAgKi9cbiAgaHRtbCgpIHtcbiAgICByZXR1cm4gdGhpcy4kaHRtbDtcbiAgfSxcblxuICAvKipcbiAgICogYXBwZW5kVG8gLSBBcHBlbmRzIHRoZSBidXR0b24gSFRNTCBFbGVtZW50IHRvIHRoZSBnaXZlbiBjb250YWluZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gJGN0biBUaGUgSFRNTCBFbGVtZW50IHRvIHdoaWNoIHRoZSBidXR0b24gc2hvdWxkIGJlXG4gICAqICBhcHBlbmRlZC5cbiAgICpcbiAgICovXG4gIGFwcGVuZFRvKCRjdG4pIHtcbiAgICBpZiAoJGN0biAmJiAkY3RuIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICRjdG4uYXBwZW5kQ2hpbGQodGhpcy5odG1sKCkpO1xuICAgIH1cbiAgfSxcbn07XG4iLCJpbXBvcnQge1xuICBmaW5kTm9kZVR5cGUsXG4gIGNvbnRhaW5zU2VsZWN0aW9uLFxufSBmcm9tICcuL3dyaXRlRnJlZUxpYi5qcyc7XG5cbmltcG9ydCBCYXNlVG9vbGJhciBmcm9tICcuL3RiX2NvbXBvbmVudHMvYmFzZVRvb2xiYXIuanMnO1xuaW1wb3J0IFRvb2xiYXJCdXR0b24gZnJvbSAnLi90Yl9jb21wb25lbnRzL3RiQnV0dG9uLmpzJztcblxuLy8gQ3JlYXRlIHRoZSBFZGl0VG9vbGJhciBmcm9tIHRoZSBCYXNlVG9vbGJhci5cbmNvbnN0IGVkaXRUb29sYmFyID0gT2JqZWN0LmNyZWF0ZShCYXNlVG9vbGJhcik7XG5cbi8qKlxuICogaW5pdCAtIEluaXRpYWxpemUgdGhlIEVkaXRUb29sYmFyLiBDYWxsc2UgdGhlIEJhc2VUb29sYmFyJ3MgaW5pdGlhbGl6YXRpb25cbiAqICBtZXRob2QgdGhlbiBzZXRzIHVwIHRoZSByZXF1aXNpdGUgYnV0dG9ucyBhbmQgaW5wdXQuXG4gKlxuICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvciBUaGUgRWRpdG9yIHdoaWNoIG93bnMgdGhpcyBUb29sYmFyLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIGluaXRpYWxpemF0aW9uIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHVzZXIuXG4gKlxuICogQHJldHVybnMge0VkaXRUb29sYmFyfSBSZXR1cm5zIHRoaXMuXG4gKi9cbmVkaXRUb29sYmFyLmluaXQgPSBmdW5jdGlvbiBpbml0KGVkaXRvciwgb3B0aW9ucykge1xuICB0aGlzLmluaXRUb29sYmFyKGVkaXRvciwgb3B0aW9ucyk7XG4gIHRoaXMuaW5wdXQuaW5pdCh0aGlzLmRpc3BsYXlCdXR0b25zLmJpbmQodGhpcyksIHRoaXMuJGN0bik7XG4gIHRoaXMuY3JlYXRlVG9vbGJhckJ0bnMoKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIGNyZWF0ZVRvb2xiYXJCdG5zIC0gQ3JlYXRlIHRoZSBidXR0b25zIHRvIGJlIGluY2x1ZGVkIG9uIHRoZSB0b29sYmFyLCBhZGRcbiAqICBhcHByb3ByaWF0ZSBldmVudCBsaXN0ZW5lcnMsIGFuZCBhdHRhY2hlcyB0aGVtIHRvIHRoZSAkY3RuLlxuICovXG5lZGl0VG9vbGJhci5jcmVhdGVUb29sYmFyQnRucyA9IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXJCdG5zKCkge1xuICB0aGlzLmJvbGRCdG4gPSBPYmplY3QuY3JlYXRlKFRvb2xiYXJCdXR0b24pO1xuICB0aGlzLmJvbGRCdG4uaW5pdCgnPGI+QjwvYj4nLCAnQm9sZCBTZWxlY3Rpb24nLCB0aGlzLmVkaXRvci5ib2xkU2VsZWN0aW9uLmJpbmQodGhpcy5lZGl0b3IpLCB0aGlzLiRidG5DdG4pO1xuICB0aGlzLml0YWxpY0J0biA9IE9iamVjdC5jcmVhdGUoVG9vbGJhckJ1dHRvbik7XG4gIHRoaXMuaXRhbGljQnRuLmluaXQoJzxpPmk8L2k+JywgJ0l0YWxpY2l6ZSBTZWxlY3Rpb24nLCB0aGlzLmVkaXRvci5pdGFsaWNpemVTZWxlY3Rpb24uYmluZCh0aGlzLmVkaXRvciksIHRoaXMuJGJ0bkN0bik7XG4gIHRoaXMuaGVhZGluZ0J0biA9IE9iamVjdC5jcmVhdGUoVG9vbGJhckJ1dHRvbik7XG4gIHRoaXMuaGVhZGluZ0J0bi5pbml0KCdIJywgJ1dyYXAgU2VsZWN0aW9uIHdpdGggSGVhZGluZycsIHRoaXMuZWRpdG9yLndyYXBIZWFkaW5nLmJpbmQodGhpcy5lZGl0b3IpLCB0aGlzLiRidG5DdG4pO1xuICB0aGlzLmxpbmtCdG4gPSBPYmplY3QuY3JlYXRlKFRvb2xiYXJCdXR0b24pO1xuICB0aGlzLmxpbmtCdG4uaW5pdCgn8J+UlycsICdXcmFwIFNlbGVjdGlvbiB3aXRoIExpbmsnLCB0aGlzLmxpbmtCdG5IYW5kbGVyLmJpbmQodGhpcyksIHRoaXMuJGJ0bkN0bik7XG59O1xuXG4vKipcbiAqIHRvZ2dsZURpc2FibGVkQnV0dG9ucyAtIERpc2FibGVzIGJ1dHRvbnMgYXMgbmVjZXNzYXJ5LiBBcyBvZiBub3csIGlmIGEgdGhlXG4gKiAgY3VycmVudCBzZWxlY3Rpb24gY29udGFpbnMgYSBoZWFkaW5nLCBhbGwgYnV0dG9ucyBvdGhlciB0aGFuIHRoZSBoZWFkaW5nXG4gKiAgYnV0dG9uIGFyZSBkaXNhYmxlZC5cbiAqXG4gKiBAcGFyYW0ge1JhbmdlfSByYW5nZSBUaGUgY3VycmVudCByYW5nZS5cbiAqXG4gKi9cbmVkaXRUb29sYmFyLnRvZ2dsZURpc2FibGVkQnV0dG9ucyA9IGZ1bmN0aW9uIHRvZ2dsZURpc2FibGVkQnV0dG9ucygpIHtcbiAgaWYgKFxuICAgIGZpbmROb2RlVHlwZSh0aGlzLmN1cnJlbnRSYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciwgJ0gxJylcbiAgICB8fCBmaW5kTm9kZVR5cGUodGhpcy5jdXJyZW50UmFuZ2UuY29tbW9uQW5jZXN0b3JDb250YWluZXIsICdIMicpXG4gICkge1xuICAgIHRoaXMubGlua0J0bi5kaXNhYmxlKCk7XG4gICAgdGhpcy5ib2xkQnRuLmRpc2FibGUoKTtcbiAgICB0aGlzLml0YWxpY0J0bi5kaXNhYmxlKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5saW5rQnRuLmVuYWJsZSgpO1xuICAgIHRoaXMuYm9sZEJ0bi5lbmFibGUoKTtcbiAgICB0aGlzLml0YWxpY0J0bi5lbmFibGUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiB0b2dnbGVBY3RpdmVMaW5rIC0gSWYgYWRzIHRoZSBhY3RpdmUgY2xhc3MgdG8gdGhlIGxpbmsgYnV0dG9uIGlmIHRoZVxuICogIGN1cnJlbnQgc2VsZWN0aW9uIGNvbnRhaW5zIGEgbGluay4gSXQgYWxzbyBhdHRhY2hlcyBhIGN1cnJlbnRMaW5rXG4gKiAgYXR0cmlidXRlIHRvIHRoZSBsaW5rIGJ1dHRvbiBzbyB0aGUgbGluayBjYW4gYmUgcmVtb3ZlZC5cbiAqXG4gKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsIFRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAqXG4gKi9cbmVkaXRUb29sYmFyLnRvZ2dsZUFjdGl2ZUxpbmsgPSBmdW5jdGlvbiB0b2dnbGVBY3RpdmVMaW5rKHNlbCkge1xuICBjb25zdCByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICBjb25zdCBjdXJyZW50TGluayA9IGZpbmROb2RlVHlwZShyYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciwgJ0EnKTtcbiAgaWYgKGN1cnJlbnRMaW5rICYmIHNlbC5jb250YWluc05vZGUoY3VycmVudExpbmssIHRydWUpKSB7XG4gICAgdGhpcy5saW5rQnRuLm1hcmtBY3RpdmUoKTtcbiAgICB0aGlzLmxpbmtCdG4uY3VycmVudExpbmsgPSBjdXJyZW50TGluaztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxpbmtCdG4uY3VycmVudExpbmsgPSBudWxsO1xuICAgIHRoaXMubGlua0J0bi5tYXJrSW5hY3RpdmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBsaW5rQnRuSGFuZGxlciAtIEhhbmRsZXIgZm9yIHdoZW4gJGxpbmtCdG4gaXMgY2xpY2tlZC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHN1Y2Nlc3NmdWwgZWxzZSBmYWxzZS5cbiAqL1xuZWRpdFRvb2xiYXIubGlua0J0bkhhbmRsZXIgPSBmdW5jdGlvbiBsaW5rQnRuSGFuZGxlcigpIHtcbiAgaWYgKHRoaXMubGlua0J0bi5jdXJyZW50TGluaykge1xuICAgIHRoaXMuZWRpdG9yLnJlbW92ZUxpbmsodGhpcy5saW5rQnRuLmN1cnJlbnRMaW5rKTtcbiAgICB0aGlzLmxpbmtCdG4uY3VycmVudExpbmsgPSBudWxsO1xuICAgIHRoaXMubGlua0J0bi5tYXJrSW5hY3RpdmUoKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmlucHV0LnNldFNhdmVIYW5kbGVyKHRoaXMuZWRpdG9yLndyYXBMaW5rKTtcbiAgICB0aGlzLmhpZGVCdXR0b25zKCk7XG4gICAgdGhpcy5pbnB1dC5kaXNwbGF5KCdUeXBlIGEgbGluay4uLicpO1xuICB9XG59O1xuXG4vKipcbiAqIGRpc3BsYXkgLSBEaXNwbGF5cyB0aGUgRWRpdFRvb2xiYXIuXG4gKlxuICogQHBhcmFtIHtTZWxlY3Rpb259IFtzZWw9bnVsbF0gVGhlIHNlbGVjdGlvbiBuZXh0IHRvIHdoaWNoIHRoZSB0b29sYmFyIHNob3VsZFxuICogIGJlIGRpc3BsYXllZC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBFZGl0VG9vbGJhciBpcyBkaXNwbGF5ZWQuIEVsc2UgZmFsc2UuXG4gKi9cbmVkaXRUb29sYmFyLmRpc3BsYXkgPSBmdW5jdGlvbiBkaXNwbGF5KHNlbCA9IG51bGwpIHtcbiAgaWYgKCEoc2VsIGluc3RhbmNlb2YgU2VsZWN0aW9uKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAoY29udGFpbnNTZWxlY3Rpb24oc2VsLCB0aGlzLiRjdG4pKSByZXR1cm4gZmFsc2U7XG4gIHRoaXMuY3VycmVudFJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gIHRoaXMudG9nZ2xlQWN0aXZlTGluayhzZWwpO1xuICB0aGlzLnRvZ2dsZURpc2FibGVkQnV0dG9ucygpO1xuICByZXR1cm4gdGhpcy5iYXNlRGlzcGxheSgpO1xufTtcblxuLy8gRXhwb3J0IHRoZSBFZGl0VG9vbGJhciBmb3IgdXNlIGVsc2V3aGVyZS5cbmV4cG9ydCBkZWZhdWx0IGVkaXRUb29sYmFyO1xuIiwiaW1wb3J0IHsgdmFsaWRhdGVVUkwgfSBmcm9tICcuL3dyaXRlRnJlZUxpYi5qcyc7XG5cbmltcG9ydCBCYXNlVG9vbGJhciBmcm9tICcuL3RiX2NvbXBvbmVudHMvYmFzZVRvb2xiYXIuanMnO1xuaW1wb3J0IFRvb2xiYXJCdXR0b24gZnJvbSAnLi90Yl9jb21wb25lbnRzL3RiQnV0dG9uLmpzJztcblxuLy8gQ3JlYXRlIHRoZSBJbnNlcnRUb29sYmFyIGZyb20gdGhlIEJhc2VUb29sYmFyLlxuY29uc3QgaW5zZXJ0VG9vbGJhciA9IE9iamVjdC5jcmVhdGUoQmFzZVRvb2xiYXIpO1xuXG4vKipcbiAqIGluaXQgLSBJbml0aWFsaXplIHRoZSBpbnNlcnRUb29sYmFyLiBDYWxsc2UgdGhlIEJhc2VUb29sYmFyJ3MgaW5pdGlhbGl6YXRpb25cbiAqICBtZXRob2QgdGhlbiBzZXRzIHVwIHRoZSByZXF1aXNpdGUgYnV0dG9ucyBhbmQgaW5wdXQuXG4gKlxuICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvciBUaGUgRWRpdG9yIHdoaWNoIG93bnMgdGhpcyBUb29sYmFyLlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIGluaXRpYWxpemF0aW9uIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHVzZXIuXG4gKlxuICogQHJldHVybnMge0luc2VydFRvb2xiYXJ9IFJldHVybnMgdGhpcy5cbiAqL1xuaW5zZXJ0VG9vbGJhci5pbml0ID0gZnVuY3Rpb24gaW5pdChlZGl0b3IsIG9wdGlvbnMpIHtcbiAgdGhpcy5pbml0VG9vbGJhcihlZGl0b3IsIG9wdGlvbnMpO1xuICB0aGlzLnRvb2xiYXJPZmZzZXQgPSAxNTtcbiAgdGhpcy5jcmVhdGVUb29sYmFyQnRucygpO1xuICB0aGlzLmlucHV0LmluaXQodGhpcy5oaWRlSW1hZ2VJbnB1dC5iaW5kKHRoaXMpLCB0aGlzLiRjdG4pO1xuICB0aGlzLmlucHV0LiRpbnB1dC5pZCA9ICdpbnB1dCc7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBjcmVhdGVUb29sYmFyQnRucyAtIENyZWF0ZXMgdGhlIHJlcXVpc2l0ZSBidXR0b25zIGZvciB0aGlzIHRvb2xiYXIuIFRoZVxuICogIGluc2VydFRvb2xiYXIgYWxsb3dzIHVzZXJzIHRvIGluc2VydCBpbWFnZXMgYW5kIGhvcml6b250YWwgcnVsZXMgc28gdGhpc1xuICogIG1ldGhvZCBjcmVhdGVzIGJ1dHRvbnMgdG8gYWxsb3cgdGhlIHVzZXIgdG8gZG8gdGhlc2UgdGhpbmdzLlxuICpcbiAqL1xuaW5zZXJ0VG9vbGJhci5jcmVhdGVUb29sYmFyQnRucyA9IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXJCdG5zKCkge1xuICB0aGlzLmltZ0J0biA9IE9iamVjdC5jcmVhdGUoVG9vbGJhckJ1dHRvbik7XG4gIHRoaXMuaW1nQnRuLmluaXQoJ/CflrzvuI8nLCAnSW5zZXJ0IGFuIEltYWdlJywgdGhpcy5kaXNwbGF5SW1nSW5wdXQuYmluZCh0aGlzKSwgdGhpcy4kYnRuQ3RuKTtcbiAgdGhpcy5saW5lQnRuID0gT2JqZWN0LmNyZWF0ZShUb29sYmFyQnV0dG9uKTtcbiAgdGhpcy5saW5lQnRuLmluaXQoJy0tJywgJ0luc2VydCBhIEhvcml6b250YWwgUnVsZScsIHRoaXMuZWRpdG9yLmluc2VydExpbmUuYmluZCh0aGlzLmVkaXRvciksIHRoaXMuJGJ0bkN0bik7XG59O1xuXG4vKipcbiAqIHRvZ2dsZURpc2FibGVkQnV0dG9ucyAtIFRvZ2dsZXMgdGhlIGRpc2FibGVkIGJ1dHRvbnMuIElmIHRoZSB1c2VyIGlzXG4gKiAgY3VycmVudGx5IGluIHRoZSBmaXJzdCBzZWN0aW9uLCB0aGV5IGNhbm5vdCBhZGQgYSBob3Jpem9udGFsIHJ1bGUuXG4gKlxuICovXG5pbnNlcnRUb29sYmFyLnRvZ2dsZURpc2FibGVkQnV0dG9ucyA9IGZ1bmN0aW9uIHRvZ2dsZURpc2FibGVkQnV0dG9ucygpIHtcbiAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICBpZiAodGhpcy5lZGl0b3IuaXNGaXJzdChzZWwuYW5jaG9yTm9kZSkpIHtcbiAgICB0aGlzLmxpbmVCdG4uZGlzYWJsZSgpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGluZUJ0bi5lbmFibGUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBkaXNwbGF5SW1nSW5wdXQgLSBEaXNwbGF5cyB0aGUgaW5wdXQgZm9yIGFkZGluZyBhbiBpbWFnZS5cbiAqXG4gKi9cbmluc2VydFRvb2xiYXIuZGlzcGxheUltZ0lucHV0ID0gZnVuY3Rpb24gZGlzcGxheUltZ0lucHV0KCkge1xuICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gIHRoaXMuY3VycmVudFJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gIHRoaXMuaW5wdXQuc2V0U2F2ZUhhbmRsZXIodGhpcy5pbnNlcnRJbWFnZS5iaW5kKHRoaXMpKTtcbiAgdGhpcy5pbnB1dC5wcmV2ZW50SGlkZU9uRW50ZXIgPSB0cnVlO1xuICB0aGlzLmhpZGVCdXR0b25zKCk7XG4gIHRoaXMuaW5wdXQuZGlzcGxheSgnVHlwZSBhbiBpbWFnZSBVUkwuLi4nKTtcbn07XG5cblxuLyoqXG4gKiBoaWRlSW1hZ2VJbnB1dCAtIEhpZGVzIHRoZSBpbnB1dCBmb3IgYWRkaW5nIGFuIGltYWdlLlxuICpcbiAqL1xuaW5zZXJ0VG9vbGJhci5oaWRlSW1hZ2VJbnB1dCA9IGZ1bmN0aW9uIGhpZGVJbWFnZUlucHV0KCkge1xuICB0aGlzLmltZ1VSTCA9IG51bGw7XG4gIHRoaXMuZGlzcGxheUJ1dHRvbnMoKTtcbn07XG5cbi8qKlxuICogaW5zZXJ0SW1hZ2UgLSBUaGlzIGZ1bmN0aW9uIGFjdHMgYXMgdGhlIHNhdmVIYW5kbGVyIGZvciB0aGUgaW1hZ2UgaW5wdXQuIFRoZVxuICogIGlucHV0IGZpcnN0IHByb21wdHMgdGhlIHVzZXIgdG8gcHJvdmlkZSBhIHVybCwgdGhlbiBhbHQgdGV4dC4gSWYgdGhlIHVzZXJcbiAqICBoYXMgbm90IHlldCBwcm92aWRlZCB0aGUgaW1hZ2UgdXJsLCBpdCB3aWxsIHRha2UgdGhlIHZhbHVlIGZyb20gdGhlIGlucHV0XG4gKiAgYW5kIHN0b3JlIGl0IGFzIHRoZSBpbWFnZSB1cmwsIHByb21wdGluZyB0aGUgdXNlciBmb3IgdGhlIGFsdCB0ZXh0LiBPbmNlXG4gKiAgdGhpcyBoYXMgYmVlbiBwcm92aWRlZCwgdGhlIGZ1bmN0aW9uIHBhc3NlcyBjb250cm9sIHRvIHRoZSBlZGl0b3IgYW5kIGNsb3Nlc1xuICogIGl0c2VsZi5cbiAqXG4gKi9cbmluc2VydFRvb2xiYXIuaW5zZXJ0SW1hZ2UgPSBmdW5jdGlvbiBpbnNlcnRJbWFnZSgpIHtcbiAgaWYgKCF0aGlzLmltZ1VSTCkge1xuICAgIHRoaXMuaW1nVVJMID0gdmFsaWRhdGVVUkwodGhpcy5pbnB1dC5nZXRWYWx1ZSgpKTtcbiAgICB0aGlzLmlucHV0LmNsZWFyKCdFbnRlciBhbHQgdGV4dC4uLicpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZWRpdG9yLmluc2VydEltYWdlKHRoaXMuaW1nVVJMLCB0aGlzLmlucHV0LmdldFZhbHVlKCksIHRoaXMuY3VycmVudFJhbmdlLnN0YXJ0Q29udGFpbmVyKTtcbiAgICB0aGlzLmlucHV0LmhpZGUoKTtcbiAgICB0aGlzLmRpc3BsYXlCdXR0b25zKCk7XG4gICAgdGhpcy5oaWRlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogZGlzcGxheSAtIERpc3BsYXlzIHRoZSBJbnNlcnRUb29sYmFyLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIEluc2VydFRvb2xiYXIgd2FzIHN1Y2Nlc3NmdWxseVxuICogIGRpc3BsYXllZC4gRWxzZSByZXR1cm5zIGZhbHNlLlxuICovXG5pbnNlcnRUb29sYmFyLmRpc3BsYXkgPSBmdW5jdGlvbiBkaXNwbGF5KCkge1xuICB0aGlzLnRvZ2dsZURpc2FibGVkQnV0dG9ucygpO1xuICByZXR1cm4gdGhpcy5iYXNlRGlzcGxheSgpO1xufTtcblxuLy8gRXhwb3J0IHRoZSBJbnNlcnRUb29sYmFyIGZvciB1c2UgZWxzZXdoZXJlLlxuZXhwb3J0IGRlZmF1bHQgaW5zZXJ0VG9vbGJhcjtcbiIsImltcG9ydCB7XG4gIGFkZFN0eWxlRnJvbU9iaixcbiAgYWRkQ2xhc3NlcyxcbiAgZ2VuZXJhdGVFbGVtZW50LFxuICBpc0RlbGV0aW9uS2V5LFxuICBmaW5kUGFyZW50QmxvY2ssXG4gIGNvbnRhaW5zU2VsZWN0aW9uLFxuICB2YWxpZGF0ZVVSTCxcbiAgY29sbGFwc2VTZWxlY3Rpb25Ub1JhbmdlLFxufSBmcm9tICcuL3dyaXRlRnJlZUxpYi5qcyc7XG5cbmltcG9ydCBlZGl0VG9vbGJhciBmcm9tICcuL2VkaXRUb29sYmFyLmpzJztcbmltcG9ydCBpbnNlcnRUb29sYmFyIGZyb20gJy4vaW5zZXJ0VG9vbGJhci5qcyc7XG5cbi8qXG4jIyMjIyMjIyAgIyMjIyMjIyMgIyMjIyMjIyMgICAgIyMjICAgICMjICAgICAjIyAjIyAgICAgICAjIyMjIyMjI1xuIyMgICAgICMjICMjICAgICAgICMjICAgICAgICAgIyMgIyMgICAjIyAgICAgIyMgIyMgICAgICAgICAgIyNcbiMjICAgICAjIyAjIyAgICAgICAjIyAgICAgICAgIyMgICAjIyAgIyMgICAgICMjICMjICAgICAgICAgICMjXG4jIyAgICAgIyMgIyMjIyMjICAgIyMjIyMjICAgIyMgICAgICMjICMjICAgICAjIyAjIyAgICAgICAgICAjI1xuIyMgICAgICMjICMjICAgICAgICMjICAgICAgICMjIyMjIyMjIyAjIyAgICAgIyMgIyMgICAgICAgICAgIyNcbiMjICAgICAjIyAjIyAgICAgICAjIyAgICAgICAjIyAgICAgIyMgIyMgICAgICMjICMjICAgICAgICAgICMjXG4jIyMjIyMjIyAgIyMjIyMjIyMgIyMgICAgICAgIyMgICAgICMjICAjIyMjIyMjICAjIyMjIyMjIyAgICAjI1xuKi9cblxuLyoqXG4qIEVkaXRvciAtIFRoZSBtYWluIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIFdyaXRlRnJlZSBlZGl0b3IuXG4qXG4qIEBwcm9wZXJ0eSB7RWxlbWVudH0gJGN0biAtIFRoZSBvdXRlcm1vc3QgY29udGFpbmVyIG9mIHRoZSBXcml0ZUZyZWUgZWRpdG9yLlxuKiAgJGN0biBpcyBwYXNzZWQgaW4gdG8gdGhlIFdyaXRlRnJlZSBpbnN0YW50aWF0aW9uIGZ1bmN0aW9uLlxuKiBAcHJvcGVydHkge0VsZW1lbnR9ICRpbm5lckN0biAtIFRoZSBhY3R1YWwgY29udGV0bmVkaXRhYmxlLWRpdiBpbiB3aGljaCB0aGVcbiogIHVzZXIgY2FuIHdyaXRlXG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogaW5pdFdGRWRpdG9yIC0gSW5pdGlhbGl6ZXMgdGhlIEVkaXRvci4gQ3JlYXRlcyBhbiBpbm5lciBjb250YWluZXIgZGl2IGFuZFxuICAgKiAgZmlsbHMgaXQgd2l0aCBhIGxpbmUgYnJlYWsgKGRvbmUgdG8gZW5zdXJlIHRoZSBmaXJzdCBibG9jayBvZiB0ZXh0IGlzXG4gICAqICB3cmFwcGVkIGluIGEgZGl2KTsgaW5pdGlhbGl6ZXMgdGhlIFRvb2xiYXI7IGFuZCBhZGRzIHRoZSBwYXN0ZUhhbmRsZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtFZGl0b3J9IFJldHVybnMgdGhpcy5cbiAgICovXG4gIGluaXRXRkVkaXRvcigkY3RuLCBvcHRpb25zKSB7XG4gICAgdGhpcy4kY3RuID0gJGN0bjtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZ2VuZXJhdGVDbGFzc2VzKCk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2RlZmF1bHRQYXJhZ3JhcGhTZXBhcmF0b3InLCBmYWxzZSwgdGhpcy5vcHRpb25zLmRpdk9yUGFyKTtcbiAgICB0aGlzLiRpbm5lckN0biA9IGdlbmVyYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgdGhpcy5jbGFzc2VzLm1haW4sXG4gICAgICB7IHN0eWxlOiB0aGlzLm9wdGlvbnMuY29udGFpbmVyU3R5bGUgfSxcbiAgICApO1xuICAgIHRoaXMuJGlubmVyQ3RuLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgdHJ1ZSk7XG4gICAgdGhpcy4kY3RuLmFwcGVuZCh0aGlzLiRpbm5lckN0bik7XG4gICAgdGhpcy5jcmVhdGVGaXJzdFRleHRTZWN0aW9uKCk7XG5cbiAgICB0aGlzLmVkaXRUb29sYmFyID0gZWRpdFRvb2xiYXIuaW5pdCh0aGlzLCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuaW5zZXJ0VG9vbGJhciA9IGluc2VydFRvb2xiYXIuaW5pdCh0aGlzLCB0aGlzLm9wdGlvbnMpO1xuXG4gICAgdGhpcy4kY3RuLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgdGhpcy5wYXN0ZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy4kY3RuLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuJGN0bi5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5dXBIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuJGN0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2hlY2tGb3JJbnNlcnQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy4kY3RuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLnBvc2l0aW9uQ3Vyc29yLmJpbmQodGhpcykpO1xuICAgIC8vIG11c3QgYmUgYWRkZWQgdG8gZG9jdW1lbnQgYmVjYXVzZSBvZiBicm93c2Vycy5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCB0aGlzLnNlbGVjdGlvbkhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgZ2VuZXJhdGVDbGFzc2VzKCkge1xuICAgIHRoaXMuY2xhc3NlcyA9IHt9O1xuICAgIHRoaXMuY2xhc3Nlcy5tYWluID0gWyd3Zl9fZWRpdG9yJ107XG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb250YWluZXJDbGFzcyAhPT0gJ3dmX19lZHRpb3InKSB7XG4gICAgICB0aGlzLmNsYXNzZXMubWFpbi5wdXNoKHRoaXMub3B0aW9ucy5jb250YWluZXJDbGFzcyk7XG4gICAgfVxuICAgIHRoaXMuY2xhc3Nlcy50ZXh0U2VjdGlvbiA9ICd3Zl9fdGV4dC1zZWN0aW9uJztcbiAgICB0aGlzLmNsYXNzZXMuY29udGFpbmVyU2VjdGlvbiA9ICd3Zl9fY29udGFpbmVyLXNlY3Rpb24nO1xuICAgIHJldHVybiB0aGlzLmNsYXNzZXM7XG4gIH0sXG5cbiAgLypcbiAgICMjIyMjIyAgIyMjIyMjIyMgICMjIyMjIyAgIyMjIyMjIyMgIyMjIyAgIyMjIyMjIyAgIyMgICAgIyMgICMjIyMjI1xuICAjIyAgICAjIyAjIyAgICAgICAjIyAgICAjIyAgICAjIyAgICAgIyMgICMjICAgICAjIyAjIyMgICAjIyAjIyAgICAjI1xuICAjIyAgICAgICAjIyAgICAgICAjIyAgICAgICAgICAjIyAgICAgIyMgICMjICAgICAjIyAjIyMjICAjIyAjI1xuICAgIyMjIyMjICAjIyMjIyMgICAjIyAgICAgICAgICAjIyAgICAgIyMgICMjICAgICAjIyAjIyAjIyAjIyAgIyMjIyMjXG4gICAgICAgICMjICMjICAgICAgICMjICAgICAgICAgICMjICAgICAjIyAgIyMgICAgICMjICMjICAjIyMjICAgICAgICMjXG4gICMjICAgICMjICMjICAgICAgICMjICAgICMjICAgICMjICAgICAjIyAgIyMgICAgICMjICMjICAgIyMjICMjICAgICMjXG4gICAjIyMjIyMgICMjIyMjIyMjICAjIyMjIyMgICAgICMjICAgICMjIyMgICMjIyMjIyMgICMjICAgICMjICAjIyMjIyNcbiAgKi9cblxuICAvKipcbiAgICogY3JlYXRlRmlyc3RUZXh0U2VjdGlvbiAtIFRoZSBlZGl0b3IgbXVzdCBoYXZlIHRoZSBhIGZpcnN0IGRpdiBpbiBvcmRlciB0byBlbnN1cmVcbiAgICogIHByb3BlciBmb3JtYXR0aW5nLiBUaGlzIG1ldGhvZCBjcmVhdGVzIHRoZSBmaXJzdCBkaXYgYW5kIGFwcGVuZHMgaXQgdG9cbiAgICogIHRoZSBpbm5lciBjb250YWluZXIuXG4gICAqL1xuICBjcmVhdGVGaXJzdFRleHRTZWN0aW9uKCkge1xuICAgIGlmICghdGhpcy4kZmlyc3RTZWN0aW9uKSB7XG4gICAgICB0aGlzLiRmaXJzdFNlY3Rpb24gPSB0aGlzLmNyZWF0ZVRleHRTZWN0aW9uKCk7XG4gICAgfVxuICAgIHRoaXMuJGZpcnN0U2VjdGlvbi50ZXh0Q29udGVudCA9ICcnO1xuICAgIHRoaXMuJGlubmVyQ3RuLmluc2VydEJlZm9yZSh0aGlzLiRmaXJzdFNlY3Rpb24sIHRoaXMuJGlubmVyQ3RuLmZpcnN0Q2hpbGQpO1xuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2V0U3RhcnQodGhpcy4kZmlyc3RTZWN0aW9uLCAwKTtcbiAgICByYW5nZS5zZXRFbmQodGhpcy4kZmlyc3RTZWN0aW9uLCAwKTtcbiAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgICB3aW5kb3cuZmlyc3QgPSB0aGlzLiRmaXJzdFNlY3Rpb247XG4gICAgcmV0dXJuIHRoaXMuJGZpcnN0U2VjdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogZGlzcGxheUZpcnN0U2VjdGlvblBsYWNlaG9sZGVyIC0gQ2hlY2tzIGlmIGN1cnJlbnQgc2VjdGlvbiBpcyB0aGUgZmlyc3QgdGV4dFNlY3Rpb25cbiAgICogIGFuZCwgaWYgc28sIGVuc3VyZXMgdGhlIHNlY3Rpb24gaXMgY29tcGxldGVseSBlbXB0eS4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlXG4gICAqICBwbGFjZWhvbGRlciBpcyBwcm9wZXJseSBkaXNwbGF5ZWQuXG4gICAqXG4gICAqL1xuICBkaXNwbGF5Rmlyc3RTZWN0aW9uUGxhY2Vob2xkZXIoKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChcbiAgICAgIHNlbC5pc0NvbGxhcHNlZFxuICAgICAgJiYgdGhpcy5pc0ZpcnN0KHNlbC5hbmNob3JOb2RlKVxuICAgICAgJiYgc2VsLmFuY2hvck5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuY2xhc3Nlcy50ZXh0U2VjdGlvbilcbiAgICAgICYmIHNlbC5hbmNob3JOb2RlLnRleHRDb250ZW50ID09PSAnJ1xuICAgICkge1xuICAgICAgc2VsLmFuY2hvck5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBjcmVhdGVUZXh0U2VjdGlvbiAtIENyZWF0ZXMgYSBzdGFuZGFyZCB0ZXh0IHNlY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm5zIHtFbGVtZW50fSBUaGUgbmV3bHktY3JlYXRlZCB0ZXh0IHNlY3Rpb24uXG4gICAqL1xuICBjcmVhdGVUZXh0U2VjdGlvbigpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnNlY3Rpb25DbGFzcykpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zZWN0aW9uQ2xhc3MgPSBBcnJheSh0aGlzLm9wdGlvbnMuc2VjdGlvbkNsYXNzKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2VjdGlvbkNsYXNzLmluY2x1ZGVzKHRoaXMuY2xhc3Nlcy50ZXh0U2VjdGlvbikpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zZWN0aW9uQ2xhc3MucHVzaCh0aGlzLmNsYXNzZXMudGV4dFNlY3Rpb24pO1xuICAgIH1cbiAgICBjb25zdCBwYXJPcHRpb25zID0ge1xuICAgICAgc3R5bGU6IHRoaXMub3B0aW9ucy5zZWN0aW9uU3R5bGUsXG4gICAgICBrbGFzc2VzOiB0aGlzLm9wdGlvbnMuc2VjdGlvbkNsYXNzLFxuICAgIH07XG4gICAgcmV0dXJuIGdlbmVyYXRlRWxlbWVudCh0aGlzLm9wdGlvbnMuZGl2T3JQYXIsIFtdLCBwYXJPcHRpb25zKTtcbiAgfSxcblxuICAvKipcbiAgICogY3JlYXRlQ29udGFpbmVyU2VjdGlvbiAtIENyZWF0ZXMgYSBjb250YWluZXIgZGl2IHRvIGhvdXNlIGFueSBpbmxpbmUgb2JqZWN0cyB0aGVcbiAgICogIHVzZXIgaW5zZXJ0cyAoaW1nLCBocikuIFRoZXNlIGFyZSB1c2VkIGluIG9yZGVyIHRvIHNlcGFyYXRlIHNlY3Rpb25zIGluIHdoaWNoIHRoZVxuICAgKiAgdXNlciBjYW4gdHlwZSBhbmQgdGhvc2UgaW4gd2hpY2ggdGhleSBjYW5ub3QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gW2NoaWxkTm9kZV0gSWYgcHJvdmlkZWQsIGNoaWxkTm9kZSB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZSBuZXdseS1cbiAgICogIGNyZWF0ZWQgY29udGFpbmVyLlxuICAgKlxuICAgKiBAcmV0dXJucyB7RWxlbWVudH0gUmV0dXJucyB0aGUgbmV3bHktY3JlYXRlZCBjb250YWluZXIuXG4gICAqL1xuICBjcmVhdGVDb250YWluZXJTZWN0aW9uKGNoaWxkTm9kZSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGdlbmVyYXRlRWxlbWVudCgnZGl2JywgdGhpcy5jbGFzc2VzLmNvbnRhaW5lclNlY3Rpb24pO1xuICAgIGlmIChjaGlsZE5vZGUgJiYgY2hpbGROb2RlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkTm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIG5vcm1hbGl6ZVNlY3Rpb24gLSBOb3JtYWxpemVzIHRoZSBjdXJyZW50IHNlY3Rpb24gKGRpdiBvciBwKSBpbiBvcmRlciB0b1xuICAgKiAgam9pbiBhbGwgc2VwYXJhdGUgdGV4dCBub2Rlcy4gVGV4dCBub2RlcyBlbmQgdXAgc3BsaXQgd2hlbiBzdGFydGluZ1xuICAgKiAgbmV3bGluZXMgYW5kIHRyeWluZyB0byByZWpvaW4gc2VjdGlvbnMgYW5kIHNvIG11c3QgYmUgbm9ybWFsaXplZC5cbiAgICpcbiAgICogQHJldHVybnMge251bGx9IFJldHVybnMgbnVsbC5cbiAgICovXG4gIG5vcm1hbGl6ZVNlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgY29uc3Qgc3RhcnRQYXJlbnQgPSBmaW5kUGFyZW50QmxvY2soc2VsLmFuY2hvck5vZGUpO1xuICAgICAgY29uc3QgZW5kUGFyZW50ID0gZmluZFBhcmVudEJsb2NrKHNlbC5mb2N1c05vZGUpO1xuICAgICAgaWYgKHN0YXJ0UGFyZW50KSBzdGFydFBhcmVudC5ub3JtYWxpemUoKTtcbiAgICAgIGlmIChlbmRQYXJlbnQpIGVuZFBhcmVudC5ub3JtYWxpemUoKTtcbiAgICAgIGlmIChyYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcikgcmFuZ2UuY29tbW9uQW5jZXN0b3JDb250YWluZXIubm9ybWFsaXplKCk7XG4gICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGRlbGV0ZUNvbnRhaW5lclNlY3Rpb24gLSBEZWxldGVzIGFuIGVudGlyZSBjb250YWluZXIgc2VjdGlvbi4gVXNlZCB3aGVuIHRoZVxuICAgKiAgdXNlciBpcyBhdCB0aGUgYmVnaW5uaW5nIG9yIGVuZCBvZiBhIHRleHQgc2VjdGlvbiBhbmQgcHJlc3MgYmFja3NwYWNlIG9yXG4gICAqICB0aGUgZGVsZXRlIGtleSAocGFzc2VkIGluIGFzICdrZXknKS4gUHJldmVudHMgdXNlciBmcm9tIGVudGVyaW5nIHRoZVxuICAgKiAgY29udGFpbmVyIHNlY3Rpb24gdW53aXR0aW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7S2V5YmFvcmRFdmVudH0gZSBUaGUgRXZlbnQgdG8gdXNlIHRvIGRldGVybWluZSB3aGljaCBrZXkgd2FzXG4gICAqICBwcmVzc2VkLiBlLmtleSBtdXN0IGJlICdCYWNrc3BhY2UnIG9yICdEZWxldGUnLiBJZiAnQmFja3NwYWNlJywgdGhpc1xuICAgKiAgbWV0aG9kIHdpbGwgZGVsZXRlIHRoZSBwcmV2aW91cyBzZWN0aW9uLiBJZiAnRGVsZXRlJywgdGhpcyBtZXRob2Qgd2lsbFxuICAgKiAgZGVsZXRlIHRoZSBuZXh0IGNvbnRhaW5lciBzZWN0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZVxuICAgKi9cbiAgZGVsZXRlQ29udGFpbmVyU2VjdGlvbihlKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBmaW5kUGFyZW50QmxvY2soc2VsLmFuY2hvck5vZGUpO1xuICAgIGxldCBuZXh0U2VjdGlvbiA9IG51bGw7XG4gICAgaWYgKGUua2V5ID09PSAnQmFja3NwYWNlJykge1xuICAgICAgbmV4dFNlY3Rpb24gPSBzZWN0aW9uLnByZXZpb3VzU2libGluZztcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRGVsZXRlJykge1xuICAgICAgbmV4dFNlY3Rpb24gPSBzZWN0aW9uLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBuZXh0U2VjdGlvblxuICAgICAgJiYgbmV4dFNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuY2xhc3Nlcy5jb250YWluZXJTZWN0aW9uKVxuICAgICkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2VjdGlvbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5leHRTZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIHByZXZlbnRUZXh0SW5Db250YWluZXIgLSBQcmV2ZW50cyB0aGUgdXNlciBmcm9tIHR5cGluZyBpbiBjb250YWluZXJcbiAgICogIHNlY3Rpb25zLiBJZiBhIHVzZXIgdHJpZXMgdG8gdHlwZSBpbiBhIGNvbnRhaW5lciBzZWN0aW9uLCB0aGUgbmV4dCB0ZXh0XG4gICAqICBzZWN0aW9uIGlzIGF1dG9tYXRpY2FsbHkgc2VsZWN0ZWQgb3IsIGlmIG5vbmUgaXMgcHJlc2VudCwgYSBuZXcgb25lIGlzXG4gICAqICBjcmVhdGVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjb250YWluZXIgc2VjdGlvbi4gVXAgYW5kIGxlZnQgYXJyb3cga2V5c1xuICAgKiAgbW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBwcmV2aW91cyBzZWN0aW9uIGFuZCByaWdodCBhbmQgZG93biBhcnJvdyBrZXlzIG1vdmVcbiAgICogIHRoZSBjdXJzb3IgdG8gdGhlIG5leHQgc2VjdGlvbi5cbiAgICpcbiAgICovXG4gIHByZXZlbnRUZXh0SW5Db250YWluZXIoZSkge1xuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBjb25zdCBzZWN0aW9uID0gZmluZFBhcmVudEJsb2NrKHNlbC5hbmNob3JOb2RlKTtcbiAgICBpZiAoc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnModGhpcy5jbGFzc2VzLmNvbnRhaW5lclNlY3Rpb24pKSB7XG4gICAgICBsZXQgbmV3U2VjdGlvbiA9IHNlY3Rpb24ubmV4dFNpYmxpbmc7XG4gICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJyB8fCBlLmtleSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICAgICAgbmV3U2VjdGlvbiA9IHNlY3Rpb24ucHJldmlvdXNTaWJsaW5nO1xuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicgfHwgZS5rZXkgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgICBuZXdTZWN0aW9uID0gc2VjdGlvbi5uZXh0U2libGluZztcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICFuZXdTZWN0aW9uXG4gICAgICAgIHx8IG5ld1NlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuY2xhc3Nlcy5jb250YWluZXJTZWN0aW9uKVxuICAgICAgICB8fCAoXG4gICAgICAgICAgbmV3U2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnModGhpcy5jbGFzc2VzLnRleHRTZWN0aW9uKVxuICAgICAgICAgICYmIG5ld1NlY3Rpb24udGV4dENvbnRlbnQubGVuZ3RoID4gMFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgbmV3U2VjdGlvbiA9IHRoaXMuY3JlYXRlVGV4dFNlY3Rpb24oKTtcbiAgICAgICAgdGhpcy4kaW5uZXJDdG4uaW5zZXJ0QmVmb3JlKG5ld1NlY3Rpb24sIHNlY3Rpb24ubmV4dFNpYmxpbmcpO1xuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2VsLmNvbGxhcHNlKG5ld1NlY3Rpb24sIDApO1xuICAgIH1cbiAgfSxcblxuICAvKlxuICAjIyMjIyMjIyAjIyMjIyMjIyAgIyMjIyAjIyMjIyMjIyAjIyMjICMjICAgICMjICAjIyMjIyNcbiAgIyMgICAgICAgIyMgICAgICMjICAjIyAgICAgIyMgICAgICMjICAjIyMgICAjIyAjIyAgICAjI1xuICAjIyAgICAgICAjIyAgICAgIyMgICMjICAgICAjIyAgICAgIyMgICMjIyMgICMjICMjXG4gICMjIyMjIyAgICMjICAgICAjIyAgIyMgICAgICMjICAgICAjIyAgIyMgIyMgIyMgIyMgICAjIyMjXG4gICMjICAgICAgICMjICAgICAjIyAgIyMgICAgICMjICAgICAjIyAgIyMgICMjIyMgIyMgICAgIyNcbiAgIyMgICAgICAgIyMgICAgICMjICAjIyAgICAgIyMgICAgICMjICAjIyAgICMjIyAjIyAgICAjI1xuICAjIyMjIyMjIyAjIyMjIyMjIyAgIyMjIyAgICAjIyAgICAjIyMjICMjICAgICMjICAjIyMjIyNcbiAgKi9cblxuICAvKipcbiAgICogYm9sZFNlbGVjdGlvbiAtIEJvbGRzIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICpcbiAgICovXG4gIGJvbGRTZWxlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWwgaW5zdGFuY2VvZiBTZWxlY3Rpb24pIHtcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJywgZmFsc2UpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogbGlua0J0bkhhbmRsZXIgLSBJdGFsaWNpemVzIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICpcbiAgICovXG4gIGl0YWxpY2l6ZVNlbGVjdGlvbigpIHtcbiAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKHNlbCBpbnN0YW5jZW9mIFNlbGVjdGlvbikge1xuICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycsIGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIHdyYXBIZWFkaW5nIC0gV3JhcCB0aGUgY3VycmVudCBzZWxlY3Rpb24gaW4gYSBoZWFkaW5nIGVsZW1lbnQgb3IgcmVtb3Zlc1xuICAgKiAgY3VycmVudCBoZWFkaW5nIGVsZW1lbnQuIFdyYXBzIG5vbi1oZWFkaW5ncyBpbiBIMSBpZiB0aGUgY3VycmVudFxuICAgKiAgc2VsZWN0aW9uIGlzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBFZGl0b3Igb3RoZXJ3aXNlIHVzZXMgSDIuIFJlbW92ZXNcbiAgICogIGFsbCBjaGlsZHJlbiBIVE1MIGVsZW1lbnRzLCBsZWF2aW5pbmcgb25seSB0ZXh0LlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHN1Y2Nlc3NmdWwgZWxzZSBmYWxzZS5cbiAgICovXG4gIHdyYXBIZWFkaW5nKCkge1xuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBsZXQgcGFyZW50bm9kZSA9IGZpbmRQYXJlbnRCbG9jayhzZWwuYW5jaG9yTm9kZSk7XG4gICAgcGFyZW50bm9kZS5pbm5lckhUTUwgPSBwYXJlbnRub2RlLmlubmVySFRNTC5yZXBsYWNlKC88W14+XSs+L2csICcnKTtcbiAgICBsZXQgdGFnTmFtZTtcbiAgICBsZXQga2xhc3M7XG4gICAgbGV0IHN0eWxlO1xuICAgIGlmIChzZWwgaW5zdGFuY2VvZiBTZWxlY3Rpb24pIHtcbiAgICAgIGlmIChwYXJlbnRub2RlLnRhZ05hbWUgPT09ICdIMScpIHtcbiAgICAgICAgdGFnTmFtZSA9IHRoaXMub3B0aW9ucy5kaXZPclBhcjtcbiAgICAgICAga2xhc3MgPSB0aGlzLm9wdGlvbnMuc2VjdGlvbkNsYXNzO1xuICAgICAgICBzdHlsZSA9IHRoaXMub3B0aW9ucy5zZWN0aW9uU3R5bGU7XG4gICAgICB9IGVsc2UgaWYgKHBhcmVudG5vZGUudGFnTmFtZSA9PT0gJ0RJVicpIHtcbiAgICAgICAgdGFnTmFtZSA9ICdoMic7XG4gICAgICAgIGtsYXNzID0gdGhpcy5vcHRpb25zLnNtYWxsSGVhZGluZ0NsYXNzO1xuICAgICAgICBzdHlsZSA9IHRoaXMub3B0aW9ucy5zbWFsbEhlYWRpbmdDbGFzcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZ05hbWUgPSAnaDEnO1xuICAgICAgICBrbGFzcyA9IHRoaXMub3B0aW9ucy5sYXJnZUhlYWRpbmdDbGFzcztcbiAgICAgICAgc3R5bGUgPSB0aGlzLm9wdGlvbnMubGFyZ2VIZWFkaW5nU3R5bGU7XG4gICAgICB9XG4gICAgICBjb25zdCBzdWNjZXNzZnVsID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2Zvcm1hdEJsb2NrJywgZmFsc2UsIHRhZ05hbWUpO1xuICAgICAgaWYgKHN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgcGFyZW50bm9kZSA9IGZpbmRQYXJlbnRCbG9jayhzZWwuYW5jaG9yTm9kZSk7XG4gICAgICAgIGFkZFN0eWxlRnJvbU9iaihwYXJlbnRub2RlLCBzdHlsZSk7XG4gICAgICAgIGFkZENsYXNzZXMocGFyZW50bm9kZSwga2xhc3MpO1xuICAgICAgICBjb25zdCByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgICByYW5nZS5zZWxlY3ROb2RlKHNlbC5mb2N1c05vZGUpO1xuICAgICAgICByYW5nZS5jb2xsYXBzZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN1Y2Nlc3NmdWw7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICAvKipcbiAgICogd3JhcExpbmsgLSB3cmFwcyB0aGUgZ2l2ZW4gcmFuZ2UgKGN1cnJlbnRSYW5nZSkgd2l0aCBhIGxpbmsgbm9kZSBwb2ludGluZ1xuICAgKiAgdG8gdGhlIGdpdmVuIFVSTCAocmF3VVJMKS4gVGhpcyBtZXRob2QgZmlyc3QgdmFsaWRhdGVzIHRoZSBVUkwsIHRocm93aW5nXG4gICAqICBpdCBvdXQgaWYgaXQgaXNuJ3QgcHJvcGVybHkgZm9ybWF0dGluZy4gSXQgd2lsbCBpbnNlcnQgdGhlIGh0dHAgcHJvdG9jb2xcbiAgICogIGlmIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBpZiBpdCBkb2Vzbid0IGNvbnRhaW4gaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdVUkwgICAgICBBIHN0cmluZyBjb250YWluaW5nIHRoZSBVUkwgdG8gd2hpY2ggdGhlIGxpbmtcbiAgICogIHdpbGwgcG9pbnQuXG4gICAqIEBwYXJhbSB7UmFuZ2V9IGN1cnJlbnRSYW5nZSBUaGUgUmFuZ2UgYXJvdW5kIHdoaWNoIHRoZSBsaW5rIHdpbGwgYmVcbiAgICogIHdyYXBwZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtFbGVtZW50IHx8IGJvb2xlYW59IFdpbGwgcmV0dXJuIHRoZSBuZXcgbGluayBpZiBzdWNjZXNzZnVsLCBlbHNlXG4gICAqICByZXR1cm5zIGZhbHNlLlxuICAgKi9cbiAgd3JhcExpbmsocmF3VVJMLCBjdXJyZW50UmFuZ2UpIHtcbiAgICBjb25zdCB1cmwgPSB2YWxpZGF0ZVVSTChyYXdVUkwpO1xuICAgIGlmICghdXJsKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgbGluayA9IGdlbmVyYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICBjdXJyZW50UmFuZ2Uuc3Vycm91bmRDb250ZW50cyhsaW5rKTtcbiAgICBjb2xsYXBzZVNlbGVjdGlvblRvUmFuZ2Uod2luZG93LmdldFNlbGVjdGlvbigpLCBjdXJyZW50UmFuZ2UpO1xuICAgIHJldHVybiBsaW5rO1xuICB9LFxuXG4gIC8qKlxuICAgKiByZW1vdmVMaW5rIC0gUmVwbGFjZXMgdGhlIGdpdmVuIGxpbmsgbm9kZSB3aXRoIGEgdGV4dCBub2RlIGNvbnRhaW5pbmcgdGhlXG4gICAqICBsaW5rJ3MgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9ICRsaW5rIFRoZSBsaW5uayB0byByZW1vdmUuXG4gICAqXG4gICAqL1xuICByZW1vdmVMaW5rKCRsaW5rKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIHRoaXMuY3VycmVudFJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNlbGVjdE5vZGUoJGxpbmspO1xuICAgIGNvbnN0IHBsYWluVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCRsaW5rLnRleHRDb250ZW50KTtcbiAgICByYW5nZS5kZWxldGVDb250ZW50cygpO1xuICAgIHJhbmdlLmluc2VydE5vZGUocGxhaW5UZXh0KTtcbiAgICBjb2xsYXBzZVNlbGVjdGlvblRvUmFuZ2Uoc2VsLCByYW5nZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGluc2VydEltYWdlIC0gSW5zZXJ0cyBhbiBpbWFnZSBpbnRvIHRoZSBlZGl0b3IuIE11c3QgYmUgcHJvdmlkZWQgc3JjLCBhbHRcbiAgICogIGFuZCBuZXh0U2libGluZyBpbiBvcmRlciB0byBwcm9wZXJseSByZW5kZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgICAgICAgICAgVGhlIHN0cmluZyB0byB1c2UgZm9yIHRoZSBpbWcncyBzcmMgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWx0ICAgICAgICAgIFRoZSBzdHJpbmcgdG8gdXNlIGZvciB0aGUgaW1nJ3MgYWx0IGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBuZXh0U2libGluZyBUaGUgSFRNTCBFbGVtZW50IGJlZm9yZSB3aGljaCB0aGUgaW1hZ2Ugd2lsbFxuICAgKiAgYmUgaW5zZXJ0ZWQuXG4gICAqXG4gICAqIFRPRE86IEdldCByaWQgb2YgYWxlcnQuIEJ1aWxkIG91dCBhIHNpbXBsZSBtZXNzYWdpbmcgc3lzdGVtIGZvciB1c2Vycy5cbiAgICovXG4gIGluc2VydEltYWdlKHNyYywgYWx0LCBuZXh0U2libGluZykge1xuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBjb25zdCBpbWcgPSBnZW5lcmF0ZUVsZW1lbnQoJ2ltZycsIHRoaXMub3B0aW9ucy5pbWdDbGFzcywgeyBzcmMsIGFsdCwgc3R5bGU6IHRoaXMub3B0aW9ucy5pbWdTdHlsZSB9KTtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jcmVhdGVDb250YWluZXJTZWN0aW9uKCk7XG4gICAgaW1nLnNlY3Rpb24gPSBzZWN0aW9uO1xuICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24gb25JbWFnZUVycm9yKCkge1xuICAgICAgaW1nLnNlY3Rpb24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWcuc2VjdGlvbik7XG4gICAgICBhbGVydCgnSW1hZ2UgZmFpbGVkIHRvIGxvYWQuJyk7XG4gICAgfTtcbiAgICBpZiAobmV4dFNpYmxpbmcgPT09IHRoaXMuJGZpcnN0U2VjdGlvbikge1xuICAgICAgdGhpcy4kZmlyc3RTZWN0aW9uID0gc2VjdGlvbjtcbiAgICB9XG4gICAgc2VjdGlvbi5hcHBlbmRDaGlsZChpbWcpO1xuICAgIG5leHRTaWJsaW5nLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlY3Rpb24sIG5leHRTaWJsaW5nKTtcbiAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKG5leHRTaWJsaW5nKTtcbiAgICBjb2xsYXBzZVNlbGVjdGlvblRvUmFuZ2Uoc2VsLCByYW5nZSwgdHJ1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGluc2VydExpbmUgLSBJbnNlcnRzIGEgbGluZSBpbiB0aGUgZWRpdG9yIGRpcmVjdGx5IGJlZm9yZSB0aGUgY3VycmVudFxuICAgKiAgcG9zaXRpb24gb2YgdGhlIHNlbGVjdGlvbiBjdXJzb3IuXG4gICAqXG4gICAqL1xuICBpbnNlcnRMaW5lKCkge1xuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBsZXQgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcbiAgICBjb25zdCBuZXh0U2libGluZyA9IGZpbmRQYXJlbnRCbG9jayhyYW5nZS5zdGFydENvbnRhaW5lcik7XG4gICAgaWYgKG5leHRTaWJsaW5nID09PSB0aGlzLiRmaXJzdFNlY3Rpb24pIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jcmVhdGVDb250YWluZXJTZWN0aW9uKCk7XG4gICAgc2VjdGlvbi5hcHBlbmRDaGlsZChsaW5lKTtcbiAgICBuZXh0U2libGluZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWN0aW9uLCBuZXh0U2libGluZyk7XG4gICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhuZXh0U2libGluZyk7XG4gICAgY29sbGFwc2VTZWxlY3Rpb25Ub1JhbmdlKHNlbCwgcmFuZ2UsIHRydWUpO1xuICAgIHRoaXMuaW5zZXJ0VG9vbGJhci5oaWRlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLypcbiAgIyMgICAgICMjICAgICMjIyAgICAjIyAgICAjIyAjIyMjIyMjIyAgIyMgICAgICAgIyMjIyMjIyMgIyMjIyMjIyMgICAjIyMjIyNcbiAgIyMgICAgICMjICAgIyMgIyMgICAjIyMgICAjIyAjIyAgICAgIyMgIyMgICAgICAgIyMgICAgICAgIyMgICAgICMjICMjICAgICMjXG4gICMjICAgICAjIyAgIyMgICAjIyAgIyMjIyAgIyMgIyMgICAgICMjICMjICAgICAgICMjICAgICAgICMjICAgICAjIyAjI1xuICAjIyMjIyMjIyMgIyMgICAgICMjICMjICMjICMjICMjICAgICAjIyAjIyAgICAgICAjIyMjIyMgICAjIyMjIyMjIyAgICMjIyMjI1xuICAjIyAgICAgIyMgIyMjIyMjIyMjICMjICAjIyMjICMjICAgICAjIyAjIyAgICAgICAjIyAgICAgICAjIyAgICMjICAgICAgICAgIyNcbiAgIyMgICAgICMjICMjICAgICAjIyAjIyAgICMjIyAjIyAgICAgIyMgIyMgICAgICAgIyMgICAgICAgIyMgICAgIyMgICMjICAgICMjXG4gICMjICAgICAjIyAjIyAgICAgIyMgIyMgICAgIyMgIyMjIyMjIyMgICMjIyMjIyMjICMjIyMjIyMjICMjICAgICAjIyAgIyMjIyMjXG4gICovXG5cbiAgLyoqXG4gICAqIHNlbGVjdGlvbkhhbmRsZXIgLSBIYW5kbGVzIHRoZSBnaXZlbiBTZWxlY3Rpb24gKHNlbCkgZXZlbnQuIElmIHRoZSBnaXZlblxuICAgKiAgb2JqZWN0IGlzIG5vdCBhIFNlbGVjdGlvbiB0aGlzIG1ldGhvZCB3aWxsIGltbWVkaWF0ZWx5IHJldHVybiBmYWxzZS5cbiAgICogIE90aGVyd2lzZSBpdCB3aWxsIGRpc3BsYXkgdGhlIFRvb2xiYXIgaWYgdGhlIFNlbGVjdGlvbiBpcyBjb250YWluZWRcbiAgICogIGZ1bGx5IHdpdGhpbiB0aGlzIEVkaXRvciBhbmQgdGhlIFNlbGVjdGlvbiBjb250YWlucyB0ZXh0LiBPdGhlcndpc2UgaXRcbiAgICogIHdpbGwgaGlkZSB0aGUgVG9vbGJhci5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZSBUaGUgc2VsZWN0aW9uY2hhbmdlIGV2ZW50LlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBzZWxlY3Rpb24gd2FzIHN1Y2Nlc3NmdWxseVxuICAgKiAgaGFuZGxlZCwgZWxzZSBmYWxzZS5cbiAgICovXG4gIHNlbGVjdGlvbkhhbmRsZXIoZSkge1xuICAgIGlmIChlLnR5cGUgIT09ICdzZWxlY3Rpb25jaGFuZ2UnKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChcbiAgICAgIChjb250YWluc1NlbGVjdGlvbihzZWwsIHRoaXMuJGN0bikgJiYgIXNlbC5pc0NvbGxhcHNlZClcbiAgICAgIHx8IGNvbnRhaW5zU2VsZWN0aW9uKHNlbCwgdGhpcy5lZGl0VG9vbGJhci5odG1sKCkpXG4gICAgKSB7XG4gICAgICB0aGlzLmVkaXRUb29sYmFyLmRpc3BsYXkoc2VsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lZGl0VG9vbGJhci5oaWRlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBwYXN0ZUhhbmRsZXIgLSBIYW5kbGVzIHRoZSBwYXN0ZSBldmVudCBpbiB0aGUgZWRpdG9yLiBXZSBpbnRlcmNlcHQgdGhlXG4gICAqICBub3JtYWwgcGFzdGUgZXZlbnQgYW5kIHN0cmlwIGFsbCBIVE1MIGZyb20gdGhlIGNvcGllZCB0ZXh0IGFuZCB0aGVuXG4gICAqICBpbnNlcnQgaXQgYXMgSFRNTC4gVGhpcyBpcyBkb25lIHRvIGVuc3VyZSB0aGF0IGVhY2ggcGFzdGUgaXMgZXNzZW50aWFsbHlcbiAgICogIGEgJ3Bhc3RlIGFzIHBsYWluIHRleHQuJyBXZSB1c2UgJ2luc2VydEhUTUwnIGJlY2F1c2UgbW9zdCBicm93c2VycyBkb24ndFxuICAgKiAgYWxsb3cgYWNjZXNzIHRvIHRoZSBwYXN0ZSBhY3Rpb24gaW4gZXhlY0NvbW1hbmQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgVGhlIHBhc3RlIGV2ZW50LlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGhpamFja2VkIHBhc3RlIHdhcyBzdWNjZXNzZnVsIGVsc2VcbiAgICogIGZhbHNlLlxuICAgKi9cbiAgcGFzdGVIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCFlLnR5cGUgPT09ICdwYXN0ZScpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCB0ZXh0ID0gZS5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0SFRNTCcsIGZhbHNlLCB0ZXh0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogbmV3TGluZUhhbmRsZXIgLSBIYW5kbGUncyB0aGUgY3JlYXRpb24gb2YgYSBuZXcgc2VjdGlvbiB3aGVuIHRoZSB1c2VyXG4gICAqICBjcmVhdGVzIGEgbmV3bGluZSAoYWthIHByZXNzZXMgJ0VudGVyJykuIFdlIGhpamFjayB0aGlzIGV2ZW50IGJlY2F1c2VcbiAgICogIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBjcmVhdGluZyBuZXcgc2VjdGlvbnMgaW4gY29udGVudGVkaXRhYmxlIGVsZW1lbnRzXG4gICAqICBjYW4gYmUgcHJldHR5IGRpZmZlcmVudCBiZXR3ZWVuIGJyb3dzZXJzIChlc3BlY2lhbGx5IEZpcmVmb3gpLlxuICAgKlxuICAgKiAgVE9ETzogQ2xlYW4gdGhpcyB1cC5cbiAgICpcbiAgICogQHJldHVybnMge0VsZW1lbnR9IFJldHVybnMgdGhlIG5ld2x5IGNyZWF0ZWQgcGFyYWdyYXBoLlxuICAgKi9cbiAgbmV3TGluZUhhbmRsZXIoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgY29uc3QgcGFyZW50QmxvY2sgPSBmaW5kUGFyZW50QmxvY2soc2VsLmZvY3VzTm9kZSk7XG4gICAgY29uc3QgbmV3UGFyID0gdGhpcy5jcmVhdGVUZXh0U2VjdGlvbigpO1xuICAgIHBhcmVudEJsb2NrLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld1BhciwgcGFyZW50QmxvY2submV4dFNpYmxpbmcpO1xuXG4gICAgY29uc3QgY3VycmVudFJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgaWYgKGN1cnJlbnRSYW5nZS5jb2xsYXBzZWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGN1cnJlbnRSYW5nZS5zZXRFbmRCZWZvcmUocGFyZW50QmxvY2submV4dFNpYmxpbmcpO1xuICAgICAgICBpZiAoY3VycmVudFJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgbmV3UGFyLmFwcGVuZChjdXJyZW50UmFuZ2UuY2xvbmVDb250ZW50cygpKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgIG5ld1Bhci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmV3UGFyLnRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3UGFyLmFwcGVuZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJykpO1xuICAgIH1cbiAgICBjdXJyZW50UmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcbiAgICBzZWwuY29sbGFwc2UobmV3UGFyLCAwKTtcbiAgICBuZXdQYXIubm9ybWFsaXplKCk7XG4gICAgY29uc3QgcmVjdCA9IG5ld1Bhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAocmVjdC50b3AgPj0gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsKHtcbiAgICAgICAgdG9wOiByZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZLFxuICAgICAgICBiZWhhdmlvcjogJ2luc3RhbnQnLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdQYXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGtleWRvd25IYW5kbGVyIC0gV2F0Y2hlcyBmb3IgZGVsZXRpb24ga2V5cyBvbiBrZXlkb3duIGV2ZW50cyBhbmQgc3RvcHNcbiAgICogIHRoZW0gZnJvbSBkZWxldGluZyB0aGUgZGl2cyBpbnNpZGUgdGhlIG1haW4gY29udGFpbmVyLiBIb3dldmVyLCB0aGlzIGlzXG4gICAqICBmYWlybHkgbGltaXRlZCBpbiBzY29wZTogdGhvdWdoIGl0IGNhdGNoZXMgQmFja3NwYWNlLCBEZWxldGUsIGFuZCBjdHJsLVhcbiAgICogIGl0J3MgcmVhbGx5IG9ubHkgbWVhbnQgdG8gc3RvcCB0aGUgQmFja3NwYWNlIGZyb20gZGVsZXRpbmcgdGhlIGZpcnN0XG4gICAqICBwYXJhZ3JhcGguIEV2ZW50cyBsaWtlIGN0cmwtQSArIEJhY2tzcGFjZSBhcmUgaGFuZGxlZCBpbiB0aGVcbiAgICogIGtleXVwSGFuZGxlci5cbiAgICpcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlIFRoZSBLZXlib2FyZEV2ZW50IHRvIHRlc3QuXG4gICAqL1xuICBrZXlkb3duSGFuZGxlcihlKSB7XG4gICAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChpc0RlbGV0aW9uS2V5KGUpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGUua2V5ID09PSAnQmFja3NwYWNlJ1xuICAgICAgICAmJiBzZWwuYW5jaG9yT2Zmc2V0ID09PSAwXG4gICAgICAgICYmIHNlbC5mb2N1c09mZnNldCA9PT0gc2VsLmZvY3VzTm9kZS50ZXh0Q29udGVudC5sZW5ndGhcbiAgICAgICAgJiYgc2VsLmFuY2hvck5vZGUgPT09IHNlbC5mb2N1c05vZGVcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRlbGV0ZUNvbnRhaW5lclNlY3Rpb24oZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBlLmtleSA9PT0gJ0RlbGV0ZSdcbiAgICAgICAgJiYgc2VsLmFuY2hvck9mZnNldCA9PT0gc2VsLmFuY2hvck5vZGUudGV4dENvbnRlbnQubGVuZ3RoXG4gICAgICAgICYmIHNlbC5mb2N1c09mZnNldCA9PT0gc2VsLmZvY3VzTm9kZS50ZXh0Q29udGVudC5sZW5ndGhcbiAgICAgICAgJiYgc2VsLmFuY2hvck5vZGUgPT09IHNlbC5mb2N1c05vZGVcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRlbGV0ZUNvbnRhaW5lclNlY3Rpb24oZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiB0aGlzLiRpbm5lckN0bi5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgIHRoaXMubmV3TGluZUhhbmRsZXIoZSk7XG4gICAgfVxuICAgIHRoaXMucHJldmVudFRleHRJbkNvbnRhaW5lcihlKTtcbiAgICBjb25zdCByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgIGNvbnN0IHByZXZTZWN0aW9uID0gZmluZFBhcmVudEJsb2NrKHJhbmdlLnN0YXJ0Q29udGFpbmVyKTtcbiAgICBpZiAoIXRoaXMuZWRpdFRvb2xiYXIuY29udGFpbnMocHJldlNlY3Rpb24pICYmICF0aGlzLmluc2VydFRvb2xiYXIuY29udGFpbnMocHJldlNlY3Rpb24pKSB7XG4gICAgICB0aGlzLnByZXZTZWN0aW9uID0gcHJldlNlY3Rpb247XG4gICAgICB0aGlzLnByZXZTZWN0aW9uUHJldlNpYmxpbmcgPSB0aGlzLnByZXZTZWN0aW9uLnByZXZpb3VzU2libGluZztcbiAgICAgIHRoaXMucHJldk9mZnNldCA9IHJhbmdlLnN0YXJ0T2Zmc2V0O1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICoga2V5dXBIYW5kbGVyIC0gV2F0Y2hlcyBmb3IgZGVsZXRpb24ga2V5cyBhbmQgcmVzZXRzIHRoZSBlZGl0b3IgY29udGFpbmVyXG4gICAqICBpZiB0aGV5IHJlbW92ZSB0aGUgZmlyc3QgaW5uZXIgcGFyYWdyYXBoLiBBbHNvIG5vcm1hbGl6ZXMgdGhlIGN1cnJlbnRcbiAgICogIHNlY3Rpb24gc28gdGhhdCBhbGwgdGV4dCBub2RlcyBhcmUgbWVyZ2VkIHRvZ2V0aGVyICh0aGlzIGhlbHBzIHdpdGhcbiAgICogIG5ld2xpbmUgZ2VuZXJhdGlvbikuIEFsc28gY2hlY2tzIHRvIHNlZSBpZiB0aGUgaW5zZXJ0VG9vbGJhciBzaG91bGQgYmVcbiAgICogIGRpc3BsYXllZC5cbiAgICpcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlIFRoZSBLZXlib2FyZEV2ZW50IHRvIHRlc3QuXG4gICAqL1xuICBrZXl1cEhhbmRsZXIoZSkge1xuICAgIGlmIChpc0RlbGV0aW9uS2V5KGUpKSB7XG4gICAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuJGlubmVyQ3RuLmlubmVySFRNTCA9PT0gJydcbiAgICAgICAgfHwgdGhpcy4kaW5uZXJDdG4uaW5uZXJIVE1MID09PSAnPGJyPidcbiAgICAgICAgfHwgc2VsLmFuY2hvck5vZGUgPT09IHRoaXMuJGlubmVyQ3RuXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jcmVhdGVGaXJzdFRleHRTZWN0aW9uKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc3BsYXlGaXJzdFNlY3Rpb25QbGFjZWhvbGRlcigpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgdGhpcy5ub3JtYWxpemVTZWN0aW9uKCk7XG4gICAgICB0aGlzLmNoZWNrRm9ySW5zZXJ0KGUpO1xuICAgICAgdGhpcy5wb3NpdGlvbkN1cnNvcigpO1xuICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBjaGVja0Zvckluc2VydCAtIERldGVybWluZXMgaWYgdGhlIGluc2VydFRvb2xiYXIgc2hvdWxkIGJlIGRpc3BsYXllZC4gSWZcbiAgICogIHRoZSB1c2VyIGlzIGluIGFuIGVtcHR5IHNlY3Rpb24sIHRoZSBpbnNlcnRUb29sYmFyIHNob3VsZCBiZSBkaXNwbGF5ZWQuXG4gICAqXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIGluc2VydFRvb2xiYXIgaXMgZGlzcGxheWVkIGVsc2VcbiAgICogIGZhbHNlLlxuICAgKi9cbiAgY2hlY2tGb3JJbnNlcnQoZSkge1xuICAgIGlmIChlICYmIHRoaXMuaW5zZXJ0VG9vbGJhci4kY3RuLmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICB0aGlzLmluc2VydFRvb2xiYXIuaGlkZSgpO1xuICAgIGlmIChzZWwuaXNDb2xsYXBzZWRcbiAgICAgICYmIChzZWwuYW5jaG9yTm9kZSAmJiBzZWwuYW5jaG9yTm9kZS50ZXh0Q29udGVudCA9PT0gJycpXG4gICAgICAmJiAhY29udGFpbnNTZWxlY3Rpb24oc2VsLCB0aGlzLmluc2VydFRvb2xiYXIuJGN0bilcbiAgICApIHtcbiAgICAgIHRoaXMuaW5zZXJ0VG9vbGJhci5kaXNwbGF5KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBwb3NpdGlvbkN1cnNvciAtIFBvc2l0aW9ucyB0aGUgY3Vyc29yIGluIGEgdGV4dFNlY3Rpb24gaWYgaXQgaXNuJ3QgaW4gb25lXG4gICAqICBhbHJlYWR5LiBUaGlzIG1ldGhvZCBmaXJzdCBsb29rcyBhdCB0aGUgcHJldmlvdXMgc2VjdGlvbiAoc2V0IGluIHRoZVxuICAgKiAga2V5ZG93bkhhbmRsZXIpIGFuZCB0cmllcyB0byBwb3NpdGlvbiB0aGUgY3Vyc29yIHRoZXJlLiBJZiB0aGF0IGZhaWxzLCBpdFxuICAgKiAgd2lsbCBwb3NpdGlvbiB0aGUgY3Vyc29yIGluIHRoZSBuZXh0IGFkamFjZW50IHRleHQgY29udGFpbmVyLCBjcmVhdGluZyBvbmVcbiAgICogIGlmIG5lY2Vzc2FyeS4gVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gZmFsc2UgaWYgdGhlIGN1cnNvciBpcyBjdXJyZW50bHkgaW5cbiAgICogIG9uZSBvZiB0aGUgdG9vbGJhcnMuXG4gICAqXG4gICAqL1xuICBwb3NpdGlvbkN1cnNvcigpIHtcbiAgICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgbGV0IHNlY3Rpb24gPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBzZWN0aW9uID0gZmluZFBhcmVudEJsb2NrKHNlbC5hbmNob3JOb2RlKTtcbiAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWRpdFRvb2xiYXIuY29udGFpbnMoc2VjdGlvbikgfHwgdGhpcy5pbnNlcnRUb29sYmFyLmNvbnRhaW5zKHNlY3Rpb24pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgaWYgKCFzZWN0aW9uLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmNsYXNzZXMudGV4dFNlY3Rpb24pKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMucHJldlNlY3Rpb25cbiAgICAgICAgJiYgdGhpcy4kaW5uZXJDdG4uY29udGFpbnModGhpcy5wcmV2U2VjdGlvbilcbiAgICAgICAgJiYgdGhpcy5wcmV2U2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnModGhpcy5jbGFzc2VzLnRleHRTZWN0aW9uKVxuICAgICAgKSB7XG4gICAgICAgIHNlbC5jb2xsYXBzZSh0aGlzLnByZXZTZWN0aW9uLCB0aGlzLnByZXZPZmZzZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VjdGlvbiA9IHRoaXMucHJldlNlY3Rpb25QcmV2U2libGluZztcbiAgICAgICAgaWYgKCFzZWN0aW9uKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IG5ld1NlY3Rpb24gPSB0aGlzLmNyZWF0ZVRleHRTZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWN0aW9uLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgdGhpcy4kaW5uZXJDdG4uaW5zZXJ0QmVmb3JlKG5ld1NlY3Rpb24sIHNlY3Rpb24ubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuJGlubmVyQ3RuLmFwcGVuZENoaWxkKG5ld1NlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhuZXdTZWN0aW9uKTtcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qXG4gICMjICAgICAjIyAjIyMjIyMjIyAjIyMjICMjICAgICAgICAjIyMjIyNcbiAgIyMgICAgICMjICAgICMjICAgICAjIyAgIyMgICAgICAgIyMgICAgIyNcbiAgIyMgICAgICMjICAgICMjICAgICAjIyAgIyMgICAgICAgIyNcbiAgIyMgICAgICMjICAgICMjICAgICAjIyAgIyMgICAgICAgICMjIyMjI1xuICAjIyAgICAgIyMgICAgIyMgICAgICMjICAjIyAgICAgICAgICAgICAjI1xuICAjIyAgICAgIyMgICAgIyMgICAgICMjICAjIyAgICAgICAjIyAgICAjI1xuICAgIyMjIyMjIyAgICAgIyMgICAgIyMjIyAjIyMjIyMjIyAgIyMjIyMjXG4gICovXG5cbiAgLyoqXG4gICAqIGh0bWwgLSBSZXR1cm5zIHRoZSBFZGl0b3IgaW4gSFRNTCBmb3JtLlxuICAgKlxuICAgKiBAcmV0dXJucyB7RWxlbWVudH0gVGhlIEVkaXRvciBpbiBIVE1MIGZvcm0uXG4gICAqL1xuICBodG1sKCkge1xuICAgIHJldHVybiB0aGlzLiRpbm5lckN0bjtcbiAgfSxcblxuICAvKipcbiAgICogZ2V0VG9vbGJhciAtIFJldHVybnMgdGhlIFRvb2xiYXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRWRpdG9yLlxuICAgKlxuICAgKiBAcmV0dXJucyB7VG9vbGJhcn0gVGhlIFRvb2xiYXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRWRpdG9yLlxuICAgKi9cbiAgZ2V0VG9vbGJhcigpIHsgcmV0dXJuIHRoaXMuZWRpdFRvb2xiYXI7IH0sXG5cbiAgLyoqXG4gICAqIGlzRmlyc3QgLSBEZXRlcm1pbmVzIGlmIGdpdmVuIEhUTUwgRWxlbWVudCBpcyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGVcbiAgICogIEVkaXRvci5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSAkbm9kZSBUaGUgSFRNTCBFbGVtZW50IHRvIHRlc3QuXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBnaXZlbiBFbGVtZW50IGlzIHRoZSBmaXJzdCBpbiB0aGUgRWRpdG9yLFxuICAgKiAgZWxzZSByZXR1cm5zIGZhbHNlLlxuICAgKi9cbiAgaXNGaXJzdCgkbm9kZSkge1xuICAgIGlmICh0aGlzLiRpbm5lckN0bi5jaGlsZHJlblswXSA9PT0gJG5vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG59O1xuIiwiLy8gd3JpdGVGcmVlLmpzXG5cbmltcG9ydCBlZGl0b3JCYXNlIGZyb20gJy4vRWRpdG9yLmpzJztcblxuLyoqXG4gKiBXcml0ZUZyZWUgLSBUaGUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIHRoZVxuICogIFdyaXRlRnJlZSBlZGl0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSAkY3RuIC0gVGhlIGVtcHR5IEhUTUwgRWxlbWVudCwgdXN1YWxseSBhIGRpdiB0byBiZSB1c2VkIGFzIHRoZVxuICogIGNvbnRhaW5lciBmb3IgdGhlIFdyaXRlRnJlZSBlZGl0b3IuXG4gKlxuICogQHJldHVybnMge0VkaXRvcn0gVGhlIFdyaXRlRnJlZSBlZGl0b3IuXG4gKi9cbmZ1bmN0aW9uIFdyaXRlRnJlZSgkY3RuLCB1c2VyT3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIGRpdk9yUGFyOiAncCcsXG4gICAgc2VjdGlvbkNsYXNzOiBudWxsLFxuICAgIHNlY3Rpb25TdHlsZTogbnVsbCxcbiAgICBjb250YWluZXJDbGFzczogJ3dmX19lZGl0b3InLFxuICAgIGNvbnRhaW5lclN0eWxlOiBudWxsLFxuICAgIGxhcmdlSGVhZGluZ0NsYXNzOiBudWxsLFxuICAgIGxhcmdlSGVhZGluZ1N0eWxlOiBudWxsLFxuICAgIHNtYWxsSGVhZGluZ0NsYXNzOiBudWxsLFxuICAgIHNtYWxsSGVhZGluZ1N0eWxlOiBudWxsLFxuICAgIGltZ0NsYXNzOiBudWxsLFxuICAgIGltZ1N0eWxlOiBudWxsLFxuICB9O1xuXG4gIGNvbnN0IG9wdGlvbnMgPSAoZnVuY3Rpb24gc2V0T3B0aW9ucygpIHtcbiAgICBjb25zdCBnbG9iYWxPcHRpb25zID0gT2JqZWN0LmNyZWF0ZShkZWZhdWx0T3B0aW9ucyk7XG4gICAgaWYgKHVzZXJPcHRpb25zICYmIHR5cGVvZiB1c2VyT3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIE9iamVjdC5rZXlzKHVzZXJPcHRpb25zKS5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgZ2xvYmFsT3B0aW9uc1tvcHRpb25dID0gdXNlck9wdGlvbnNbb3B0aW9uXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsT3B0aW9ucztcbiAgfSgpKTtcblxuICAvLyBDcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIGVkaXRvci5cbiAgY29uc3QgRWRpdG9yID0gT2JqZWN0LmNyZWF0ZShlZGl0b3JCYXNlKTtcbiAgRWRpdG9yLmluaXRXRkVkaXRvcigkY3RuLCBvcHRpb25zKTtcblxuICByZXR1cm4ge1xuICAgIGh0bWw6IEVkaXRvci5odG1sLmJpbmQoRWRpdG9yKSxcbiAgfTtcbn1cblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgZGl2T3JQYXI6ICdkaXYnLFxuICBzZWN0aW9uQ2xhc3M6ICd0ZXN0U2VjdGlvbicsXG4gIHNlY3Rpb25TdHlsZToge1xuICAgIC8vIGNvbG9yOiAnI2ZmZicsXG4gIH0sXG4gIGNvbnRhaW5lckNsYXNzOiAndGVzdENvbnRhaW5lcicsXG4gIGNvbnRhaW5lclN0eWxlOiB7XG4gICAgLy8gYmFja2dyb3VuZDogJyMzMzMnLFxuICB9LFxuICBpbWdTdHlsZToge1xuICB9LFxufTtcblxud2luZG93LndmID0gV3JpdGVGcmVlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdXcml0ZUZyZWVDdG4nKSwgb3B0aW9ucyk7XG4iXSwibmFtZXMiOlsiYWRkU3R5bGVGcm9tT2JqIiwiJGVsIiwic3R5bGVPYmoiLCJfdHlwZW9mIiwic3R5bGVTdHJpbmciLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInByb3AiLCJzZXRBdHRyaWJ1dGUiLCJhZGRDbGFzc2VzIiwia2xhc3NlcyIsIkFycmF5IiwiaXNBcnJheSIsImtsYXNzIiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2VuZXJhdGVFbGVtZW50IiwidGFnTmFtZSIsIm9wdGlvbnMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyIiwiZ2VuZXJhdGVCdXR0b24iLCJ2YWx1ZSIsImlubmVySFRNTCIsIiRidG4iLCJ0ZXh0Q29udGVudCIsImlzRGVsZXRpb25LZXkiLCJldmVudCIsImtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsIm1ldGFLZXkiLCJ0b0xvd2VyQ2FzZSIsInZhbGlkYXRlVVJMIiwidXJsIiwiaW5jbHVkZXMiLCJzdGFydHNXaXRoIiwiZmluZFBhcmVudEJsb2NrIiwiYmxvY2tUYWdzIiwiJHJldHVybkVsIiwicGFyZW50Tm9kZSIsImZpbmROb2RlVHlwZSIsIm5vZGUiLCJ0YXJnZXRUeXBlIiwibm9kZU5hbWUiLCJyZXR1cm5Ob2RlIiwiY2hpbGRyZW4iLCJmcm9tIiwiY2hpbGQiLCJmb3VuZE5vZGUiLCJjb250YWluc1NlbGVjdGlvbiIsInNlbCIsIlNlbGVjdGlvbiIsImNvbnRhaW5zIiwiYW5jaG9yTm9kZSIsImZvY3VzTm9kZSIsImNvbnRhaW5zTm9kZSIsImNvbGxhcHNlU2VsZWN0aW9uVG9SYW5nZSIsInJhbmdlIiwidG9TdGFydCIsImNvbGxhcHNlIiwicmVtb3ZlQWxsUmFuZ2VzIiwiYWRkUmFuZ2UiLCJvYmoiLCJidG4iLCJtYWluIiwiYnRuRGlzYWJsZWQiLCJidG5BY3RpdmUiLCJidG5DdG4iLCJpbnB1dCIsImlucHV0Q3RuIiwiaGlkZVVwIiwiaGlkZURvd24iLCJ3aWRlIiwiaW5pdCIsImhpZGVDYWxsYmFjayIsIiRvdXRlckN0biIsIiRjdG4iLCJ0YkNsYXNzIiwiJGlucHV0IiwidHlwZSIsIiRjbG9zZUJ0biIsImFwcGVuZENoaWxkIiwidGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJoaWRlIiwiYmluZCIsImRlZmF1bHRFbnRlckhhbmRsZXIiLCJIVE1MRWxlbWVudCIsImFwcGVuZFRvIiwiZSIsInNhdmVIYW5kbGVyIiwiY2FsbCIsImN1cnJlbnRSYW5nZSIsInByZXZlbnRIaWRlT25FbnRlciIsInNldFNhdmVIYW5kbGVyIiwiY2xlYXJTYXZlSGFuZGxlciIsImdldFZhbHVlIiwiZGlzcGxheSIsInBsYWNlaG9sZGVyIiwicmVtb3ZlIiwid2luZG93IiwiZ2V0U2VsZWN0aW9uIiwiZ2V0UmFuZ2VBdCIsImNyZWF0ZVJhbmdlIiwic2VsZWN0Tm9kZSIsInNldFRpbWVvdXQiLCJmb2N1cyIsImNsZWFyIiwibmV3UGxhY2Vob2xkZXIiLCJ1c2VDYWxsYmFjayIsInJlbW92ZVJhbmdlIiwiaHRtbCIsImdldFdpZHRoIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJnZXRIZWlnaHQiLCJoZWlnaHQiLCIkd2hlcmUiLCJCYXNlVG9vbGJhciIsImluaXRUb29sYmFyIiwiZWRpdG9yIiwidG9vbGJhck9mZnNldCIsImNvbnRlbnRlZGl0YWJsZSIsIiRidG5DdG4iLCJjcmVhdGUiLCJUb29sYmFySW5wdXQiLCJnZXRCdXR0b25zV2lkdGgiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwiZ2V0QnV0dG9uc0hlaWdodCIsImZpcnN0Q2hpbGQiLCJoaWRlQnV0dG9ucyIsInN0eWxlIiwiZGlzcGxheUJ1dHRvbnMiLCJkaXNwbGF5SW5wdXQiLCJoaWRlSW5wdXQiLCJwb3NpdGlvblRvb2xiYXIiLCJyZWN0IiwiY29sbGFwc2VkIiwiY29tbW9uQW5jZXN0b3JDb250YWluZXIiLCJ0b29sYmFyUmVjdCIsImJvdHRvbSIsImlubmVySGVpZ2h0IiwidG9wIiwibGVmdCIsImJhc2VEaXNwbGF5IiwiY29udGVudCIsInRpdGxlIiwiaGFuZGxlciIsIiRodG1sIiwiY2xpY2tIYW5kbGVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZENsYXNzIiwiX3RoaXMiLCJyZW1vdmVDbGFzcyIsIl90aGlzMiIsImRpc2FibGUiLCJkaXNhYmxlZCIsImVuYWJsZSIsIm1hcmtBY3RpdmUiLCJtYXJrSW5hY3RpdmUiLCJlZGl0VG9vbGJhciIsImNyZWF0ZVRvb2xiYXJCdG5zIiwiYm9sZEJ0biIsIlRvb2xiYXJCdXR0b24iLCJib2xkU2VsZWN0aW9uIiwiaXRhbGljQnRuIiwiaXRhbGljaXplU2VsZWN0aW9uIiwiaGVhZGluZ0J0biIsIndyYXBIZWFkaW5nIiwibGlua0J0biIsImxpbmtCdG5IYW5kbGVyIiwidG9nZ2xlRGlzYWJsZWRCdXR0b25zIiwidG9nZ2xlQWN0aXZlTGluayIsImN1cnJlbnRMaW5rIiwicmVtb3ZlTGluayIsIndyYXBMaW5rIiwiaW5zZXJ0VG9vbGJhciIsImhpZGVJbWFnZUlucHV0IiwiaWQiLCJpbWdCdG4iLCJkaXNwbGF5SW1nSW5wdXQiLCJsaW5lQnRuIiwiaW5zZXJ0TGluZSIsImlzRmlyc3QiLCJpbnNlcnRJbWFnZSIsImltZ1VSTCIsInN0YXJ0Q29udGFpbmVyIiwiaW5pdFdGRWRpdG9yIiwiZ2VuZXJhdGVDbGFzc2VzIiwiZXhlY0NvbW1hbmQiLCJkaXZPclBhciIsIiRpbm5lckN0biIsImNsYXNzZXMiLCJjb250YWluZXJTdHlsZSIsImFwcGVuZCIsImNyZWF0ZUZpcnN0VGV4dFNlY3Rpb24iLCJwYXN0ZUhhbmRsZXIiLCJrZXlkb3duSGFuZGxlciIsImtleXVwSGFuZGxlciIsImNoZWNrRm9ySW5zZXJ0IiwicG9zaXRpb25DdXJzb3IiLCJzZWxlY3Rpb25IYW5kbGVyIiwiY29udGFpbmVyQ2xhc3MiLCJwdXNoIiwidGV4dFNlY3Rpb24iLCJjb250YWluZXJTZWN0aW9uIiwiJGZpcnN0U2VjdGlvbiIsImNyZWF0ZVRleHRTZWN0aW9uIiwiaW5zZXJ0QmVmb3JlIiwic2V0U3RhcnQiLCJzZXRFbmQiLCJmaXJzdCIsImRpc3BsYXlGaXJzdFNlY3Rpb25QbGFjZWhvbGRlciIsImlzQ29sbGFwc2VkIiwic2VjdGlvbkNsYXNzIiwicGFyT3B0aW9ucyIsInNlY3Rpb25TdHlsZSIsImNyZWF0ZUNvbnRhaW5lclNlY3Rpb24iLCJjaGlsZE5vZGUiLCJjb250YWluZXIiLCJFbGVtZW50Iiwibm9ybWFsaXplU2VjdGlvbiIsInN0YXJ0UGFyZW50IiwiZW5kUGFyZW50Iiwibm9ybWFsaXplIiwiZXhjZXB0aW9uIiwiZGVsZXRlQ29udGFpbmVyU2VjdGlvbiIsInNlY3Rpb24iLCJuZXh0U2VjdGlvbiIsInByZXZpb3VzU2libGluZyIsIm5leHRTaWJsaW5nIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmVDaGlsZCIsInByZXZlbnRUZXh0SW5Db250YWluZXIiLCJuZXdTZWN0aW9uIiwicGFyZW50bm9kZSIsInJlcGxhY2UiLCJzbWFsbEhlYWRpbmdDbGFzcyIsImxhcmdlSGVhZGluZ0NsYXNzIiwibGFyZ2VIZWFkaW5nU3R5bGUiLCJzdWNjZXNzZnVsIiwicmF3VVJMIiwibGluayIsImhyZWYiLCJzdXJyb3VuZENvbnRlbnRzIiwiJGxpbmsiLCJwbGFpblRleHQiLCJjcmVhdGVUZXh0Tm9kZSIsImRlbGV0ZUNvbnRlbnRzIiwiaW5zZXJ0Tm9kZSIsInNyYyIsImFsdCIsImltZyIsImltZ0NsYXNzIiwiaW1nU3R5bGUiLCJvbmVycm9yIiwiYWxlcnQiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJsaW5lIiwidGV4dCIsImNsaXBib2FyZERhdGEiLCJnZXREYXRhIiwibmV3TGluZUhhbmRsZXIiLCJwYXJlbnRCbG9jayIsIm5ld1BhciIsInNldEVuZEJlZm9yZSIsInRvU3RyaW5nIiwiY2xvbmVDb250ZW50cyIsInNjcm9sbCIsInNjcm9sbFkiLCJiZWhhdmlvciIsImFuY2hvck9mZnNldCIsImZvY3VzT2Zmc2V0IiwidGFyZ2V0IiwicHJldlNlY3Rpb24iLCJwcmV2U2VjdGlvblByZXZTaWJsaW5nIiwicHJldk9mZnNldCIsInN0YXJ0T2Zmc2V0IiwiZ2V0VG9vbGJhciIsIiRub2RlIiwid2YiLCJnbG9iYWxPcHRpb25zIiwidXNlck9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsInNtYWxsSGVhZGluZ1N0eWxlIiwib3B0aW9uIiwiRWRpdG9yIiwiZWRpdG9yQmFzZSIsIldyaXRlRnJlZSIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiOFBBY08sU0FBU0EsRUFBZ0JDLEVBQUtDLE1BRWpDQSxNQUFBQSxHQUUwQixXQUFwQkMsRUFBT0QsVUFDSixNQUNQRSxFQUFjLFVBQ2xCQyxPQUFPQyxLQUFLSixHQUFVSyxRQUFRLFNBQUNDLEdBQzdCSixhQUFrQkksZUFBU04sRUFBU00sVUFFdENQLEVBQUlRLGFBQWEsUUFBU0wsR0FDbkJILEVBWUYsU0FBU1MsRUFBV1QsRUFBS1UsVUFDekJBLElBQ0RDLE1BQU1DLFFBQVFGLEdBQ2hCQSxFQUFRSixRQUFRLFNBQUFPLFVBQVNiLEVBQUljLFVBQVVDLElBQUlGLEtBRTNDYixFQUFJYyxVQUFVQyxJQUFJTCxJQUViVixFQWdCRixTQUFTZ0IsUUFBZ0JDLHlEQUFVLE1BQU9QLHlEQUFVLEdBQUlRLHlEQUFVLEdBQ2pFbEIsRUFBTW1CLFNBQVNDLGNBQWNILFVBQ25DUixFQUFXVCxFQUFLVSxHQUNaUSxHQUE4QixXQUFuQmhCLEVBQU9nQixJQUNwQmQsT0FBT0MsS0FBS2EsR0FBU1osUUFBUSxTQUFDZSxTQUNmLFVBQVRBLEVBQ0Z0QixFQUFnQkMsRUFBS2tCLEVBQVFHLElBQ1gsWUFBVEEsRUFDVFosRUFBV1QsRUFBS2tCLEVBQVFHLElBRXhCckIsRUFBSVEsYUFBYWEsRUFBTUgsRUFBUUcsSUFFMUIsT0FHSnJCLEVBWUYsU0FBU3NCLFFBQ2RDLHlEQUFRLFNBQ1JiLHlEQUFVLEdBQ1ZjLDBEQUdNQyxFQUFPVCxFQUFnQixTQUFVTix5REFGN0IsV0FHTmMs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
